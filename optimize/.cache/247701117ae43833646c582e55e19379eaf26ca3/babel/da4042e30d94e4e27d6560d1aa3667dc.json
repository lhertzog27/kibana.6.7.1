{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/src/legacy/core_plugins/console/public/src/controllers/sense_controller.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/src/legacy/core_plugins/console/public/src/controllers/sense_controller.js","mtime":1567631711526},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nrequire('ui/doc_title');\n\nvar _sense_editor_resize = require('../sense_editor_resize');\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _input = require('../input');\n\nvar _output = require('../output');\n\nvar _app = require('../app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _sense_top_nav_controller = require('./sense_top_nav_controller');\n\nvar _autocomplete = require('../autocomplete');\n\nvar _documentation_links = require('ui/documentation_links');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Licensed to Elasticsearch B.V. under one or more contributor\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * license agreements. See the NOTICE file distributed with\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * this work for additional information regarding copyright\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * ownership. Elasticsearch B.V. licenses this file to you under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * the Apache License, Version 2.0 (the \"License\"); you may\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *    http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */\n\n\nvar _module = require('ui/modules').get('app/sense');\n\n_module.run(function (Private, $rootScope) {\n  _module.setupResizeCheckerForRootEditors = function ($el) {\n    for (var _len = arguments.length, editors = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      editors[_key - 1] = arguments[_key];\n    }\n\n    return _sense_editor_resize.useResizeChecker.apply(undefined, [$rootScope, $el].concat(editors));\n  };\n});\n\n_module.controller('SenseController', function SenseController(Private, $scope, $timeout, $location, docTitle, kbnUiAceKeyboardModeService) {\n  var _this = this;\n\n  docTitle.change('Console');\n\n  $scope.topNavController = Private(_sense_top_nav_controller.SenseTopNavController);\n\n  // We need to wait for these elements to be rendered before we can select them with jQuery\n  // and then initialize this app\n  var input = void 0;\n  var output = void 0;\n  $timeout(_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var urlParams, session;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            output = (0, _output.initializeOutput)((0, _jquery2.default)('#ConAppOutput'));\n            input = (0, _input.initializeInput)((0, _jquery2.default)('#ConAppEditor'), (0, _jquery2.default)('#ConAppEditorActions'), (0, _jquery2.default)('#ConCopyAsCurl'), output, $scope.openDocumentation);\n\n            urlParams = $location.search();\n\n            if (urlParams.load_from) {\n              (0, _app2.default)(input, output, 'http', urlParams.load_from);\n            } else if (urlParams.command) {\n              (0, _app2.default)(input, output, 'text', urlParams.command);\n            } else {\n              (0, _app2.default)(input, output);\n            }\n\n            kbnUiAceKeyboardModeService.initialize($scope, (0, _jquery2.default)('#ConAppEditor'));\n            session = input.getSession();\n\n            session.getSelection().on('changeCursor', function () {\n              $scope.getDocumentation();\n            });\n            $scope.getDocumentation();\n\n          case 8:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, _this);\n  })));\n  $scope.getDocumentation = function () {\n    input.getRequestsInRange(function (requests) {\n      if (!requests || requests.length === 0) {\n        $scope.documentation = null;\n        $scope.$apply();\n        return;\n      }\n      var position = requests[0].range.end;\n      position.column = position.column - 1;\n      var endpoint = (0, _autocomplete.getEndpointFromPosition)(input, position);\n      if (endpoint && endpoint.documentation && endpoint.documentation.indexOf('http') !== -1) {\n        $scope.documentation = endpoint.documentation.replace('/master/', '/' + _documentation_links.DOC_LINK_VERSION + '/');\n        $scope.documentation = $scope.documentation.replace('/current/', '/' + _documentation_links.DOC_LINK_VERSION + '/');\n        $scope.$apply();\n      } else {\n        $scope.documentation = null;\n        $scope.$apply();\n      }\n    });\n  };\n  $scope.openDocumentation = function () {\n    if (!$scope.documentation) {\n      return;\n    }\n    window.open($scope.documentation, '_blank');\n  };\n\n  $scope.sendSelected = function () {\n    input.focus();\n    input.sendCurrentRequestToES();\n    return false;\n  };\n\n  $scope.autoIndent = function (event) {\n    input.autoIndent();\n    event.preventDefault();\n    input.focus();\n  };\n});",null]}