{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/src/ui/public/query_bar/components/typeahead/suggestions_component.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/src/ui/public/query_bar/components/typeahead/suggestions_component.tsx","mtime":1567631711750},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport * as tslib_1 from \"tslib\";\nimport { isEmpty } from 'lodash';\nimport React, { Component } from 'react';\nimport { SuggestionComponent } from './suggestion_component';\nvar SuggestionsComponent = /** @class */ (function (_super) {\n    tslib_1.__extends(SuggestionsComponent, _super);\n    function SuggestionsComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.childNodes = [];\n        _this.parentNode = null;\n        _this.scrollIntoView = function () {\n            if (_this.props.index === null) {\n                return;\n            }\n            var parent = _this.parentNode;\n            var child = _this.childNodes[_this.props.index];\n            if (_this.props.index == null || !parent || !child) {\n                return;\n            }\n            var scrollTop = Math.max(Math.min(parent.scrollTop, child.offsetTop), child.offsetTop + child.offsetHeight - parent.offsetHeight);\n            parent.scrollTop = scrollTop;\n        };\n        _this.handleScroll = function () {\n            if (!_this.props.loadMore || !_this.parentNode) {\n                return;\n            }\n            var position = _this.parentNode.scrollTop + _this.parentNode.offsetHeight;\n            var height = _this.parentNode.scrollHeight;\n            var remaining = height - position;\n            var margin = 50;\n            if (!height || !position) {\n                return;\n            }\n            if (remaining <= margin) {\n                _this.props.loadMore();\n            }\n        };\n        return _this;\n    }\n    SuggestionsComponent.prototype.render = function () {\n        var _this = this;\n        if (!this.props.show || isEmpty(this.props.suggestions)) {\n            return null;\n        }\n        var suggestions = this.props.suggestions.map(function (suggestion, index) {\n            return (React.createElement(SuggestionComponent, { innerRef: function (node) { return (_this.childNodes[index] = node); }, selected: index === _this.props.index, suggestion: suggestion, onClick: _this.props.onClick, onMouseEnter: function () { return _this.props.onMouseEnter(index); }, ariaId: 'suggestion-' + index, key: suggestion.type + \" - \" + suggestion.text }));\n        });\n        return (React.createElement(\"div\", { className: \"reactSuggestionTypeahead\" },\n            React.createElement(\"div\", { className: \"kbnTypeahead\" },\n                React.createElement(\"div\", { className: \"kbnTypeahead__popover\" },\n                    React.createElement(\"div\", { id: \"kbnTypeahead__items\", className: \"kbnTypeahead__items\", role: \"listbox\", ref: function (node) { return (_this.parentNode = node); }, onScroll: this.handleScroll }, suggestions)))));\n    };\n    SuggestionsComponent.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.index !== this.props.index) {\n            this.scrollIntoView();\n        }\n    };\n    return SuggestionsComponent;\n}(Component));\nexport { SuggestionsComponent };\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/src/ui/public/query_bar/components/typeahead/suggestions_component.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/src/ui/public/query_bar/components/typeahead/suggestions_component.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { isEmpty } from 'lodash';\nimport React, { Component } from 'react';\nimport { AutocompleteSuggestion } from 'ui/autocomplete_providers';\nimport { SuggestionComponent } from './suggestion_component';\n\ninterface Props {\n  index: number | null;\n  onClick: (suggestion: AutocompleteSuggestion) => void;\n  onMouseEnter: (index: number) => void;\n  show: boolean;\n  suggestions: AutocompleteSuggestion[];\n  loadMore: () => void;\n}\n\nexport class SuggestionsComponent extends Component<Props> {\n  private childNodes: HTMLDivElement[] = [];\n  private parentNode: HTMLDivElement | null = null;\n\n  public render() {\n    if (!this.props.show || isEmpty(this.props.suggestions)) {\n      return null;\n    }\n\n    const suggestions = this.props.suggestions.map((suggestion, index) => {\n      return (\n        <SuggestionComponent\n          innerRef={node => (this.childNodes[index] = node)}\n          selected={index === this.props.index}\n          suggestion={suggestion}\n          onClick={this.props.onClick}\n          onMouseEnter={() => this.props.onMouseEnter(index)}\n          ariaId={'suggestion-' + index}\n          key={`${suggestion.type} - ${suggestion.text}`}\n        />\n      );\n    });\n\n    return (\n      <div className=\"reactSuggestionTypeahead\">\n        <div className=\"kbnTypeahead\">\n          <div className=\"kbnTypeahead__popover\">\n            <div\n              id=\"kbnTypeahead__items\"\n              className=\"kbnTypeahead__items\"\n              role=\"listbox\"\n              ref={node => (this.parentNode = node)}\n              onScroll={this.handleScroll}\n            >\n              {suggestions}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  public componentDidUpdate(prevProps: Props) {\n    if (prevProps.index !== this.props.index) {\n      this.scrollIntoView();\n    }\n  }\n\n  private scrollIntoView = () => {\n    if (this.props.index === null) {\n      return;\n    }\n    const parent = this.parentNode;\n    const child = this.childNodes[this.props.index];\n\n    if (this.props.index == null || !parent || !child) {\n      return;\n    }\n\n    const scrollTop = Math.max(\n      Math.min(parent.scrollTop, child.offsetTop),\n      child.offsetTop + child.offsetHeight - parent.offsetHeight\n    );\n\n    parent.scrollTop = scrollTop;\n  };\n\n  private handleScroll = () => {\n    if (!this.props.loadMore || !this.parentNode) {\n      return;\n    }\n\n    const position = this.parentNode.scrollTop + this.parentNode.offsetHeight;\n    const height = this.parentNode.scrollHeight;\n    const remaining = height - position;\n    const margin = 50;\n\n    if (!height || !position) {\n      return;\n    }\n    if (remaining <= margin) {\n      this.props.loadMore();\n    }\n  };\n}\n"]}]}