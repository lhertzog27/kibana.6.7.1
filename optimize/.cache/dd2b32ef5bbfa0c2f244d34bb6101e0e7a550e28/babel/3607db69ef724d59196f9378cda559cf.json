{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/settings/calendars/list/calendars_list.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/settings/calendars/list/calendars_list.js","mtime":1567631712065},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarsList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp; /*\n                    * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n                    * or more contributor license agreements. Licensed under the Elastic License;\n                    * you may not use this file except in compliance with the Elastic License.\n                    */\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _eui = require('@elastic/eui');\n\nvar _table = require('./table/');\n\nvar _ml_api_service = require('../../../services/ml_api_service');\n\nvar _notify = require('ui/notify');\n\nvar _check_ml_nodes = require('../../../ml_nodes_check/check_ml_nodes');\n\nvar _delete_calendars = require('./delete_calendars');\n\nvar _react3 = require('@kbn/i18n/react');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CalendarsList = exports.CalendarsList = (0, _react3.injectI18n)((_temp = _class = function (_Component) {\n  _inherits(CalendarsList, _Component);\n\n  function CalendarsList(props) {\n    var _this2 = this;\n\n    _classCallCheck(this, CalendarsList);\n\n    var _this = _possibleConstructorReturn(this, (CalendarsList.__proto__ || Object.getPrototypeOf(CalendarsList)).call(this, props));\n\n    _this.loadCalendars = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var calendars;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _ml_api_service.ml.calendars();\n\n            case 3:\n              calendars = _context.sent;\n\n\n              _this.setState({\n                calendars: calendars,\n                loading: false,\n                isDestroyModalVisible: false\n              });\n              _context.next = 12;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context['catch'](0);\n\n              console.log(_context.t0);\n              _this.setState({ loading: false });\n              _notify.toastNotifications.addDanger(_this.props.intl.formatMessage({\n                id: 'xpack.ml.calendarsList.errorWithLoadingListOfCalendarsErrorMessage',\n                defaultMessage: 'An error occurred loading the list of calendars.'\n              }));\n\n            case 12:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, _this2, [[0, 7]]);\n    }));\n\n    _this.closeDestroyModal = function () {\n      _this.setState({ isDestroyModalVisible: false, calendarId: null });\n    };\n\n    _this.showDestroyModal = function () {\n      _this.setState({ isDestroyModalVisible: true });\n    };\n\n    _this.setSelectedCalendarList = function (selectedCalendars) {\n      _this.setState({ selectedForDeletion: selectedCalendars });\n    };\n\n    _this.deleteCalendars = function () {\n      var selectedForDeletion = _this.state.selectedForDeletion;\n\n\n      _this.closeDestroyModal();\n      (0, _delete_calendars.deleteCalendars)(selectedForDeletion, _this.loadCalendars);\n    };\n\n    _this.addRequiredFieldsToList = function () {\n      var calendarsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      for (var i = 0; i < calendarsList.length; i++) {\n        calendarsList[i].job_ids_string = calendarsList[i].job_ids.join(', ');\n        calendarsList[i].events_length = calendarsList[i].events.length;\n      }\n\n      return calendarsList;\n    };\n\n    _this.state = {\n      loading: true,\n      calendars: [],\n      isDestroyModalVisible: false,\n      calendarId: null,\n      selectedForDeletion: [],\n      nodesAvailable: (0, _check_ml_nodes.mlNodesAvailable)()\n    };\n    return _this;\n  }\n\n  _createClass(CalendarsList, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.loadCalendars();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          calendars = _state.calendars,\n          selectedForDeletion = _state.selectedForDeletion,\n          loading = _state.loading,\n          nodesAvailable = _state.nodesAvailable;\n      var _props = this.props,\n          canCreateCalendar = _props.canCreateCalendar,\n          canDeleteCalendar = _props.canDeleteCalendar;\n\n      var destroyModal = '';\n\n      if (this.state.isDestroyModalVisible) {\n        destroyModal = _react2.default.createElement(\n          _eui.EuiOverlayMask,\n          null,\n          _react2.default.createElement(\n            _eui.EuiConfirmModal,\n            {\n              title: _react2.default.createElement(_react3.FormattedMessage, {\n                id: 'xpack.ml.calendarsList.deleteCalendarsModal.deleteCalendarTitle',\n                defaultMessage: 'Delete calendar'\n              }),\n              onCancel: this.closeDestroyModal,\n              onConfirm: this.deleteCalendars,\n              cancelButtonText: _react2.default.createElement(_react3.FormattedMessage, {\n                id: 'xpack.ml.calendarsList.deleteCalendarsModal.cancelButtonLabel',\n                defaultMessage: 'Cancel'\n              }),\n              confirmButtonText: _react2.default.createElement(_react3.FormattedMessage, {\n                id: 'xpack.ml.calendarsList.deleteCalendarsModal.deleteButtonLabel',\n                defaultMessage: 'Delete'\n              }),\n              buttonColor: 'danger',\n              defaultFocusedButton: _eui.EUI_MODAL_CONFIRM_BUTTON\n            },\n            _react2.default.createElement(\n              'p',\n              null,\n              _react2.default.createElement(_react3.FormattedMessage, {\n                id: 'xpack.ml.calendarsList.deleteCalendarsModal.deleteCalendarsDescription',\n                defaultMessage: 'Delete {calendarsCount, plural, one {this calendar} other {these calendars}}? {calendarsList}',\n                values: {\n                  calendarsCount: selectedForDeletion.length,\n                  calendarsList: selectedForDeletion.map(function (c) {\n                    return c.calendar_id;\n                  }).join(', ')\n                }\n              })\n            )\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        _eui.EuiPage,\n        { className: 'mlCalendarList' },\n        _react2.default.createElement(\n          _eui.EuiPageContent,\n          {\n            className: 'mlCalendarList__content',\n            verticalPosition: 'center',\n            horizontalPosition: 'center'\n          },\n          _react2.default.createElement(_table.CalendarsListTable, {\n            loading: loading,\n            calendarsList: this.addRequiredFieldsToList(calendars),\n            onDeleteClick: this.showDestroyModal,\n            canCreateCalendar: canCreateCalendar,\n            canDeleteCalendar: canDeleteCalendar,\n            mlNodesAvailable: nodesAvailable,\n            setSelectedCalendarList: this.setSelectedCalendarList,\n            itemsSelected: selectedForDeletion.length > 0\n          })\n        ),\n        destroyModal\n      );\n    }\n  }]);\n\n  return CalendarsList;\n}(_react.Component), _class.propTypes = {\n  canCreateCalendar: _propTypes.PropTypes.bool.isRequired,\n  canDeleteCalendar: _propTypes.PropTypes.bool.isRequired\n}, _temp));",null]}