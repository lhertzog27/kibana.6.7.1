{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/jobs/jobs_list/components/jobs_stats_bar/jobs_stats_bar.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/jobs/jobs_list/components/jobs_stats_bar/jobs_stats_bar.js","mtime":1567631712050},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JobStatsBar = undefined;\n\nvar _states = require('plugins/ml/../common/constants/states');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _i18n = require('@kbn/i18n');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nfunction createJobStats(jobsSummaryList) {\n\n  var jobStats = {\n    activeNodes: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.activeMLNodesLabel', {\n        defaultMessage: 'Active ML Nodes'\n      }),\n      value: 0,\n      show: true\n    },\n    total: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.totalJobsLabel', {\n        defaultMessage: 'Total jobs'\n      }),\n      value: 0,\n      show: true\n    },\n    open: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.openJobsLabel', {\n        defaultMessage: 'Open jobs'\n      }),\n      value: 0,\n      show: true\n    },\n    closed: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.closedJobsLabel', {\n        defaultMessage: 'Closed jobs'\n      }),\n      value: 0,\n      show: true\n    },\n    failed: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.failedJobsLabel', {\n        defaultMessage: 'Failed jobs'\n      }),\n      value: 0,\n      show: false\n    },\n    activeDatafeeds: {\n      label: _i18n.i18n.translate('xpack.ml.jobsList.statsBar.activeDatafeedsLabel', {\n        defaultMessage: 'Active datafeeds'\n      }),\n      value: 0,\n      show: true\n    }\n  };\n\n  if (jobsSummaryList === undefined) {\n    return jobStats;\n  }\n\n  // object to keep track of nodes being used by jobs\n  var mlNodes = {};\n  var failedJobs = 0;\n\n  jobsSummaryList.forEach(function (job) {\n    if (job.jobState === _states.JOB_STATE.OPENED) {\n      jobStats.open.value++;\n    } else if (job.jobState === _states.JOB_STATE.CLOSED) {\n      jobStats.closed.value++;\n    } else if (job.jobState === _states.JOB_STATE.FAILED) {\n      failedJobs++;\n    }\n\n    if (job.hasDatafeed && job.datafeedState === _states.DATAFEED_STATE.STARTED) {\n      jobStats.activeDatafeeds.value++;\n    }\n\n    if (job.nodeName !== undefined) {\n      mlNodes[job.nodeName] = {};\n    }\n  });\n\n  jobStats.total.value = jobsSummaryList.length;\n\n  // // Only show failed jobs if it is non-zero\n  if (failedJobs) {\n    jobStats.failed.value = failedJobs;\n    jobStats.failed.show = true;\n  } else {\n    jobStats.failed.show = false;\n  }\n\n  jobStats.activeNodes.value = Object.keys(mlNodes).length;\n\n  return jobStats;\n}\n\nfunction Stat(_ref) {\n  var stat = _ref.stat;\n\n  return _react2.default.createElement(\n    'span',\n    { className: 'stat' },\n    _react2.default.createElement(\n      'span',\n      { className: 'stat-label' },\n      stat.label\n    ),\n    ': ',\n    _react2.default.createElement(\n      'span',\n      { className: 'stat-value' },\n      stat.value\n    )\n  );\n}\nStat.propTypes = {\n  stat: _propTypes2.default.object.isRequired\n};\n\nvar JobStatsBar = exports.JobStatsBar = function JobStatsBar(_ref2) {\n  var jobsSummaryList = _ref2.jobsSummaryList;\n\n  var jobStats = createJobStats(jobsSummaryList);\n  var stats = Object.keys(jobStats).map(function (k) {\n    return jobStats[k];\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'jobs-stats-bar' },\n    stats.filter(function (s) {\n      return s.show;\n    }).map(function (s) {\n      return _react2.default.createElement(Stat, { key: s.label, stat: s });\n    })\n  );\n};\n\nJobStatsBar.propTypes = {\n  jobsSummaryList: _propTypes2.default.array.isRequired\n};",null]}