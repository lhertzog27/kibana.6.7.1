{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/shared/charts/Histogram/index.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/shared/charts/Histogram/index.js","mtime":1567631711868},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HistogramInner = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _templateObject = _taggedTemplateLiteral(['\\n  user-select: none;\\n'], ['\\n  user-select: none;\\n']);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _d = require('d3');\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _lodash = require('lodash');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Scale = require('d3-scale');\n\nvar _styledComponents = require('styled-components');\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _SingleRect = require('./SingleRect');\n\nvar _SingleRect2 = _interopRequireDefault(_SingleRect);\n\nvar _reactVis = require('react-vis');\n\nvar _variables = require('../../../../style/variables');\n\nvar _Tooltip = require('../Tooltip');\n\nvar _Tooltip2 = _interopRequireDefault(_Tooltip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); } /*\n                                                                                                                                                   * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n                                                                                                                                                   * or more contributor license agreements. Licensed under the Elastic License;\n                                                                                                                                                   * you may not use this file except in compliance with the Elastic License.\n                                                                                                                                                   */\n\nvar XY_HEIGHT = _variables.unit * 10;\nvar XY_MARGIN = {\n  top: _variables.unit,\n  left: _variables.unit * 5,\n  right: _variables.unit,\n  bottom: _variables.unit * 2\n};\n\nvar X_TICK_TOTAL = 8;\n\nvar ChartsWrapper = _styledComponents2.default.div(_templateObject);\n\nvar HistogramInner = exports.HistogramInner = function (_PureComponent) {\n  _inherits(HistogramInner, _PureComponent);\n\n  function HistogramInner(props) {\n    _classCallCheck(this, HistogramInner);\n\n    var _this = _possibleConstructorReturn(this, (HistogramInner.__proto__ || Object.getPrototypeOf(HistogramInner)).call(this, props));\n\n    _this.onClick = function (bucket) {\n      if (_this.props.onClick) {\n        _this.props.onClick(bucket);\n      }\n    };\n\n    _this.onHover = function (bucket) {\n      _this.setState({ hoveredBucket: bucket });\n    };\n\n    _this.onBlur = function () {\n      _this.setState({ hoveredBucket: {} });\n    };\n\n    _this.state = {\n      hoveredBucket: {}\n    };\n    return _this;\n  }\n\n  _createClass(HistogramInner, [{\n    key: 'getChartData',\n    value: function getChartData(items, selectedItem) {\n      var yMax = _d2.default.max(items, function (d) {\n        return d.y;\n      });\n      var MINIMUM_BUCKET_SIZE = yMax * 0.02;\n\n      return items.map(function (item) {\n        var padding = (item.x - item.x0) / 20;\n        return _extends({}, item, {\n          color: item === selectedItem ? _variables.colors.blue2 : _variables.colors.apmLightBlue,\n          x0: item.x0 + padding,\n          x: item.x - padding,\n          y: item.y > 0 ? Math.max(item.y, MINIMUM_BUCKET_SIZE) : 0\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          backgroundHover = _props.backgroundHover,\n          bucketIndex = _props.bucketIndex,\n          buckets = _props.buckets,\n          bucketSize = _props.bucketSize,\n          formatX = _props.formatX,\n          formatYShort = _props.formatYShort,\n          formatYLong = _props.formatYLong,\n          tooltipFooter = _props.tooltipFooter,\n          tooltipHeader = _props.tooltipHeader,\n          verticalLineHover = _props.verticalLineHover,\n          XY_WIDTH = _props.width;\n      var hoveredBucket = this.state.hoveredBucket;\n\n      if ((0, _lodash.isEmpty)(buckets) || XY_WIDTH === 0) {\n        return null;\n      }\n\n      var xMin = _d2.default.min(buckets, function (d) {\n        return d.x0;\n      });\n      var xMax = _d2.default.max(buckets, function (d) {\n        return d.x;\n      });\n      var yMin = 0;\n      var yMax = _d2.default.max(buckets, function (d) {\n        return d.y;\n      });\n      var selectedBucket = buckets[bucketIndex];\n      var chartData = this.getChartData(buckets, selectedBucket);\n\n      var _x = (0, _d3Scale.scaleLinear)().domain([xMin, xMax]).range([XY_MARGIN.left, XY_WIDTH - XY_MARGIN.right]);\n      var y = (0, _d3Scale.scaleLinear)().domain([yMin, yMax]).range([XY_HEIGHT, 0]).nice();\n\n      var xDomain = _x.domain();\n      var yDomain = y.domain();\n      var yTickValues = [0, yDomain[1] / 2, yDomain[1]];\n      var isTimeSeries = this.props.xType === 'time';\n      var shouldShowTooltip = hoveredBucket.x > 0 && (hoveredBucket.y > 0 || isTimeSeries);\n\n      var showVerticalLineHover = verticalLineHover(hoveredBucket);\n      var showBackgroundHover = backgroundHover(hoveredBucket);\n\n      return _react2.default.createElement(\n        ChartsWrapper,\n        null,\n        _react2.default.createElement(\n          _reactVis.XYPlot,\n          {\n            xType: this.props.xType,\n            width: XY_WIDTH,\n            height: XY_HEIGHT,\n            margin: XY_MARGIN,\n            xDomain: xDomain,\n            yDomain: yDomain\n          },\n          _react2.default.createElement(_reactVis.HorizontalGridLines, { tickValues: yTickValues }),\n          _react2.default.createElement(_reactVis.XAxis, {\n            style: { strokeWidth: '1px' },\n            marginRight: 10,\n            tickSizeOuter: 10,\n            tickSizeInner: 0,\n            tickTotal: X_TICK_TOTAL,\n            tickFormat: formatX\n          }),\n          _react2.default.createElement(_reactVis.YAxis, {\n            tickSize: 0,\n            hideLine: true,\n            tickValues: yTickValues,\n            tickFormat: formatYShort\n          }),\n          showBackgroundHover && _react2.default.createElement(_SingleRect2.default, {\n            x: _x(hoveredBucket.x0),\n            width: _x(bucketSize) - _x(0),\n            style: {\n              fill: _variables.colors.gray5\n            }\n          }),\n          shouldShowTooltip && _react2.default.createElement(_Tooltip2.default, {\n            style: {\n              marginLeft: '1%',\n              marginRight: '1%'\n            },\n            header: tooltipHeader(hoveredBucket),\n            footer: tooltipFooter(hoveredBucket),\n            tooltipPoints: [{ value: formatYLong(hoveredBucket.y) }],\n            x: hoveredBucket.x,\n            y: yDomain[1] / 2\n          }),\n          selectedBucket && _react2.default.createElement(_SingleRect2.default, {\n            x: _x(selectedBucket.x0),\n            width: _x(bucketSize) - _x(0),\n            style: {\n              fill: 'transparent',\n              stroke: _variables.colors.blue2,\n              rx: '0px',\n              ry: '0px'\n            }\n          }),\n          _react2.default.createElement(_reactVis.VerticalRectSeries, {\n            colorType: 'literal',\n            color: _variables.colors.apmLightBlue,\n            data: chartData,\n            style: {\n              rx: '0px',\n              ry: '0px'\n            }\n          }),\n          showVerticalLineHover && _react2.default.createElement(_reactVis.VerticalGridLines, { tickValues: [hoveredBucket.x] }),\n          _react2.default.createElement(_reactVis.Voronoi, {\n            extent: [[XY_MARGIN.left, XY_MARGIN.top], [XY_WIDTH, XY_HEIGHT]],\n            nodes: this.props.buckets.map(function (bucket) {\n              return _extends({}, bucket, {\n                x: (bucket.x0 + bucket.x) / 2\n              });\n            }),\n            onClick: this.onClick,\n            onHover: this.onHover,\n            onBlur: this.onBlur,\n            x: function x(d) {\n              return _x(d.x);\n            },\n            y: function y() {\n              return 1;\n            }\n          })\n        )\n      );\n    }\n  }]);\n\n  return HistogramInner;\n}(_react.PureComponent);\n\nHistogramInner.propTypes = {\n  backgroundHover: _propTypes2.default.func,\n  bucketIndex: _propTypes2.default.number,\n  buckets: _propTypes2.default.array.isRequired,\n  bucketSize: _propTypes2.default.number.isRequired,\n  formatX: _propTypes2.default.func,\n  formatYLong: _propTypes2.default.func,\n  formatYShort: _propTypes2.default.func,\n  onClick: _propTypes2.default.func,\n  tooltipFooter: _propTypes2.default.func,\n  tooltipHeader: _propTypes2.default.func,\n  verticalLineHover: _propTypes2.default.func,\n  width: _propTypes2.default.number.isRequired,\n  xType: _propTypes2.default.string\n};\n\nHistogramInner.defaultProps = {\n  backgroundHover: function backgroundHover() {\n    return null;\n  },\n  formatYLong: function formatYLong(value) {\n    return value;\n  },\n  formatYShort: function formatYShort(value) {\n    return value;\n  },\n  tooltipFooter: function tooltipFooter() {\n    return null;\n  },\n  tooltipHeader: function tooltipHeader() {\n    return null;\n  },\n  verticalLineHover: function verticalLineHover() {\n    return null;\n  },\n  xType: 'linear'\n};\n\nexports.default = (0, _reactVis.makeWidthFlexible)(HistogramInner);",null]}