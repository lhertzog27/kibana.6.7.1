{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/rollup/public/crud_app/sections/job_create/steps_config/index.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/rollup/public/crud_app/sections/job_create/steps_config/index.js","mtime":1567631712289},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stepIdToStepConfigMap = exports.stepIds = exports.STEP_REVIEW = exports.STEP_METRICS = exports.STEP_HISTOGRAM = exports.STEP_TERMS = exports.STEP_DATE_HISTOGRAM = exports.STEP_LOGISTICS = undefined;\n\nvar _stepIdToStepConfigMa;\n\nexports.getAffectedStepsFields = getAffectedStepsFields;\nexports.hasErrors = hasErrors;\n\nvar _cloneDeep = require('lodash/lang/cloneDeep');\n\nvar _cloneDeep2 = _interopRequireDefault(_cloneDeep);\n\nvar _services = require('../../../services');\n\nvar _validate_id = require('./validate_id');\n\nvar _validate_index_pattern = require('./validate_index_pattern');\n\nvar _validate_rollup_index = require('./validate_rollup_index');\n\nvar _validate_rollup_cron = require('./validate_rollup_cron');\n\nvar _validate_rollup_page_size = require('./validate_rollup_page_size');\n\nvar _validate_rollup_delay = require('./validate_rollup_delay');\n\nvar _validate_date_histogram_field = require('./validate_date_histogram_field');\n\nvar _validate_date_histogram_interval = require('./validate_date_histogram_interval');\n\nvar _validate_histogram_interval = require('./validate_histogram_interval');\n\nvar _validate_metrics = require('./validate_metrics');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\n                                                                                                                                                                                                                   * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n                                                                                                                                                                                                                   * or more contributor license agreements. Licensed under the Elastic License;\n                                                                                                                                                                                                                   * you may not use this file except in compliance with the Elastic License.\n                                                                                                                                                                                                                   */\n\nvar STEP_LOGISTICS = exports.STEP_LOGISTICS = 'STEP_LOGISTICS';\nvar STEP_DATE_HISTOGRAM = exports.STEP_DATE_HISTOGRAM = 'STEP_DATE_HISTOGRAM';\nvar STEP_TERMS = exports.STEP_TERMS = 'STEP_TERMS';\nvar STEP_HISTOGRAM = exports.STEP_HISTOGRAM = 'STEP_HISTOGRAM';\nvar STEP_METRICS = exports.STEP_METRICS = 'STEP_METRICS';\nvar STEP_REVIEW = exports.STEP_REVIEW = 'STEP_REVIEW';\n\nvar stepIds = exports.stepIds = [STEP_LOGISTICS, STEP_DATE_HISTOGRAM, STEP_TERMS, STEP_HISTOGRAM, STEP_METRICS, STEP_REVIEW];\n\nvar stepIdToStepConfigMap = exports.stepIdToStepConfigMap = (_stepIdToStepConfigMa = {}, _defineProperty(_stepIdToStepConfigMa, STEP_LOGISTICS, {\n  defaultFields: {\n    id: '',\n    indexPattern: '',\n    rollupIndex: '',\n    // Every week on Saturday, at 00:00:00\n    rollupCron: '0 0 0 ? * 7',\n    simpleRollupCron: '0 0 0 ? * 7',\n    // The best page size boils down to how much memory the user has, e.g. how many buckets should\n    // be accumulated at one time. 1000 is probably a safe size without being too small.\n    rollupPageSize: 1000,\n    // Though the API doesn't require a delay, in many real-world cases, servers will go down for\n    // a few hours as they're being restarted. A delay of 1d would allow them that period to reboot\n    // and the \"expense\" is pretty negligible in most cases: 1 day of extra non-rolled-up data.\n    rollupDelay: '1d',\n    cronFrequency: _services.WEEK,\n    isAdvancedCronVisible: false,\n    fieldToPreferredValueMap: {}\n  },\n  fieldsValidator: function fieldsValidator(fields) {\n    var id = fields.id,\n        indexPattern = fields.indexPattern,\n        rollupIndex = fields.rollupIndex,\n        rollupCron = fields.rollupCron,\n        rollupPageSize = fields.rollupPageSize,\n        rollupDelay = fields.rollupDelay;\n\n\n    var errors = {\n      id: (0, _validate_id.validateId)(id),\n      indexPattern: (0, _validate_index_pattern.validateIndexPattern)(indexPattern, rollupIndex),\n      rollupIndex: (0, _validate_rollup_index.validateRollupIndex)(rollupIndex, indexPattern),\n      rollupCron: (0, _validate_rollup_cron.validateRollupCron)(rollupCron),\n      rollupPageSize: (0, _validate_rollup_page_size.validateRollupPageSize)(rollupPageSize),\n      rollupDelay: (0, _validate_rollup_delay.validateRollupDelay)(rollupDelay)\n    };\n\n    return errors;\n  }\n}), _defineProperty(_stepIdToStepConfigMa, STEP_DATE_HISTOGRAM, {\n  defaultFields: {\n    dateHistogramField: null,\n    dateHistogramInterval: null,\n    dateHistogramTimeZone: 'UTC'\n  },\n  fieldsValidator: function fieldsValidator(fields) {\n    var dateHistogramField = fields.dateHistogramField,\n        dateHistogramInterval = fields.dateHistogramInterval;\n\n\n    var errors = {\n      dateHistogramField: (0, _validate_date_histogram_field.validateDateHistogramField)(dateHistogramField),\n      dateHistogramInterval: (0, _validate_date_histogram_interval.validateDateHistogramInterval)(dateHistogramInterval)\n    };\n\n    return errors;\n  }\n}), _defineProperty(_stepIdToStepConfigMa, STEP_TERMS, {\n  defaultFields: {\n    terms: []\n  }\n}), _defineProperty(_stepIdToStepConfigMa, STEP_HISTOGRAM, {\n  defaultFields: {\n    histogram: [],\n    histogramInterval: undefined\n  },\n  fieldsValidator: function fieldsValidator(fields) {\n    var histogram = fields.histogram,\n        histogramInterval = fields.histogramInterval;\n\n\n    var errors = {\n      histogramInterval: (0, _validate_histogram_interval.validateHistogramInterval)(histogram, histogramInterval)\n    };\n\n    return errors;\n  }\n}), _defineProperty(_stepIdToStepConfigMa, STEP_METRICS, {\n  defaultFields: {\n    metrics: []\n  },\n  fieldsValidator: function fieldsValidator(fields) {\n    var metrics = fields.metrics;\n\n\n    var errors = {\n      metrics: (0, _validate_metrics.validateMetrics)(metrics)\n    };\n\n    return errors;\n  }\n}), _defineProperty(_stepIdToStepConfigMa, STEP_REVIEW, {}), _stepIdToStepConfigMa);\n\nfunction getAffectedStepsFields(fields, stepsFields) {\n  var indexPattern = fields.indexPattern;\n\n\n  var affectedStepsFields = (0, _cloneDeep2.default)(stepsFields);\n\n  // A new index pattern means we have to clear all of the fields which depend upon it.\n  if (indexPattern) {\n    affectedStepsFields[STEP_DATE_HISTOGRAM].dateHistogramField = undefined;\n    affectedStepsFields[STEP_TERMS].terms = [];\n    affectedStepsFields[STEP_HISTOGRAM].histogram = [];\n    affectedStepsFields[STEP_METRICS].metrics = [];\n  }\n\n  return affectedStepsFields;\n}\n\nfunction hasErrors(fieldErrors) {\n  var errorValues = Object.values(fieldErrors);\n  return errorValues.some(function (error) {\n    return error !== undefined;\n  });\n}",null]}