{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/src/ui/public/directives/input_base64.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/src/ui/public/directives/input_base64.js","mtime":1567631711717},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Licensed to Elasticsearch B.V. under one or more contributor\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * license agreements. See the NOTICE file distributed with\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * this work for additional information regarding copyright\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * ownership. Elasticsearch B.V. licenses this file to you under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * the Apache License, Version 2.0 (the \"License\"); you may\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *    http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\n\nvar _modules = require('../modules');\n\nvar _rxjs = require('rxjs');\n\nvar Rx = _interopRequireWildcard(_rxjs);\n\nvar _operators = require('rxjs/operators');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar _module = _modules.uiModules.get('kibana');\n\n\nvar multipleUsageErrorMessage = 'Cannot use input-base-sixty-four directive on input with `multiple` attribute';\n\nvar createFileContent$ = function createFileContent$(file) {\n  return Rx.Observable.create(function (observer) {\n    var reader = new FileReader();\n    reader.onerror = function (err) {\n      observer.error(err);\n    };\n\n    reader.onload = function () {\n      observer.next(reader.result);\n      observer.complete();\n    };\n\n    reader.readAsDataURL(file);\n\n    return function () {\n      reader.abort();\n    };\n  });\n};\n\n_module.directive('inputBaseSixtyFour', function () {\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    scope: 'isolate',\n    link: function link($scope, $elem, attrs, ngModel) {\n      if ($elem.prop('multiple')) {\n        throw new Error(multipleUsageErrorMessage);\n      }\n\n      var maxSizeValidator = function maxSizeValidator(dataUrl) {\n        return {\n          errorKey: 'maxSize',\n          isValid: attrs.max === '' || dataUrl.length <= parseInt(attrs.max)\n        };\n      };\n\n      var validators = [maxSizeValidator];\n\n      // produce fileContent$ whenever the $element 'change' event is triggered.\n      var fileContent$ = Rx.fromEvent($elem, 'change', function (e) {\n        return e;\n      }).pipe((0, _operators.map)(function (e) {\n        return e.target.files;\n      }), (0, _operators.switchMap)(function (files) {\n        if (files.length === 0) {\n          return [];\n        }\n\n        if (files.length > 1) {\n          throw new Error(multipleUsageErrorMessage);\n        }\n\n        return createFileContent$(files[0]);\n      }), (0, _operators.share)());\n\n      // validate the content of the files after it is loaded\n      var validations$ = fileContent$.pipe((0, _operators.map)(function (fileContent) {\n        return validators.map(function (validator) {\n          return validator(fileContent);\n        });\n      }));\n\n      // push results from input/validation to the ngModel\n      var unsubscribe = Rx.combineLatest(fileContent$, validations$).subscribe(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            fileContent = _ref2[0],\n            validations = _ref2[1];\n\n        $scope.$evalAsync(function () {\n          validations.forEach(function (validation) {\n            ngModel.$setValidity(validation.errorKey, validation.isValid);\n          });\n\n          if (validations.every(function (validation) {\n            return validation.isValid;\n          })) {\n            ngModel.$setViewValue(fileContent);\n          }\n        });\n      }, function (err) {\n        throw err;\n      });\n\n      $scope.$on('destroy', unsubscribe);\n    }\n  };\n});",null]}