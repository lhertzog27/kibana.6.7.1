{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/settings/calendars/edit/import_modal/utils.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/settings/calendars/edit/import_modal/utils.js","mtime":1567631712064},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterEvents = filterEvents;\nexports.parseICSFile = parseICSFile;\nexports.readFile = readFile;\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nvar icalendar = require('icalendar');\n\n\nfunction createEvents(ical) {\n  var events = ical.events();\n  var mlEvents = [];\n\n  events.forEach(function (e) {\n    if (e.element === 'VEVENT') {\n      var description = e.properties.SUMMARY;\n      var start = e.properties.DTSTART;\n      var end = e.properties.DTEND;\n      var recurring = e.properties.RRULE !== undefined;\n\n      if (description && start && end && description.length && start.length && end.length) {\n        // Temp reference to unsaved events to allow removal from table\n        var tempId = (0, _utils.generateTempId)();\n\n        mlEvents.push({\n          event_id: tempId,\n          description: description[0].value,\n          start_time: start[0].value.valueOf(),\n          end_time: end[0].value.valueOf(),\n          asterisk: recurring\n        });\n      }\n    }\n  });\n  return mlEvents;\n}\n\nfunction filterEvents(events) {\n  var now = (0, _moment2.default)().valueOf();\n  return events.filter(function (e) {\n    return e.start_time > now;\n  });\n}\n\nfunction parseICSFile(data) {\n  var cal = icalendar.parse_calendar(data);\n  return createEvents(cal);\n}\n\nfunction readFile(file) {\n  return new Promise(function (resolve, reject) {\n    if (file && file.size) {\n      var reader = new FileReader();\n      reader.readAsText(file);\n\n      reader.onload = function () {\n        return function () {\n          var data = reader.result;\n          if (data === '') {\n            reject();\n          } else {\n            resolve({ data: data });\n          }\n        };\n      }(file);\n    } else {\n      reject();\n    }\n  });\n}",null]}