{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/file_datavisualizer/components/results_links/results_links.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/ml/public/file_datavisualizer/components/results_links/results_links.js","mtime":1567631712045},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResultsLinks = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar getFullTimeRange = function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(index, timeFieldName) {\n    var query, resp;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            query = { bool: { must: [{ query_string: { analyze_wildcard: true, query: '*' } }] } };\n            _context2.next = 3;\n            return _ml_api_service.ml.getTimeFieldRange({\n              index: index,\n              timeFieldName: timeFieldName,\n              query: query\n            });\n\n          case 3:\n            resp = _context2.sent;\n            return _context2.abrupt('return', {\n              from: (0, _moment2.default)(resp.start.epoch).toISOString(),\n              to: (0, _moment2.default)(resp.end.epoch).toISOString()\n            });\n\n          case 5:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function getFullTimeRange(_x2, _x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar _react = require('@kbn/i18n/react');\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _eui = require('@elastic/eui');\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _chrome = require('ui/chrome');\n\nvar _chrome2 = _interopRequireDefault(_chrome);\n\nvar _ml_api_service = require('../../../services/ml_api_service');\n\nvar _check_license = require('../../../license/check_license');\n\nvar _check_privilege = require('../../../privilege/check_privilege');\n\nvar _check_ml_nodes = require('../../../ml_nodes_check/check_ml_nodes');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * or more contributor license agreements. Licensed under the Elastic License;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * you may not use this file except in compliance with the Elastic License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar RECHECK_DELAY_MS = 3000;\n\nvar ResultsLinks = exports.ResultsLinks = function (_Component) {\n  _inherits(ResultsLinks, _Component);\n\n  function ResultsLinks(props) {\n    _classCallCheck(this, ResultsLinks);\n\n    var _this = _possibleConstructorReturn(this, (ResultsLinks.__proto__ || Object.getPrototypeOf(ResultsLinks)).call(this, props));\n\n    _this.state = {\n      from: 'now-30m',\n      to: 'now'\n    };\n\n    _this.recheckTimeout = null;\n    _this.showCreateJobLink = true;\n    return _this;\n  }\n\n  _createClass(ResultsLinks, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.showCreateJobLink = (0, _check_privilege.checkPermission)('canCreateJob') && (0, _check_ml_nodes.mlNodesAvailable)();\n      // if this data has a time field,\n      // find the start and end times\n      if (this.props.timeFieldName !== undefined) {\n        this.updateTimeValues();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.recheckTimeout);\n    }\n  }, {\n    key: 'updateTimeValues',\n    value: function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var recheck = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n        var _props, index, timeFieldName, _ref2, from, to;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _props = this.props, index = _props.index, timeFieldName = _props.timeFieldName;\n                _context.next = 3;\n                return getFullTimeRange(index, timeFieldName);\n\n              case 3:\n                _ref2 = _context.sent;\n                from = _ref2.from;\n                to = _ref2.to;\n\n                this.setState({\n                  from: from === null ? this.state.from : from,\n                  to: to === null ? this.state.to : to\n                });\n\n                // these links may have been drawn too quickly for the index to be ready\n                // to give us the correct start and end times.\n                // especially if the data was small.\n                // so if the start and end were null, try again in 3s\n                // the timeout is cleared when this component unmounts. just in case the user\n                // resets the form or navigates away within 3s\n                if (recheck && (from === null || to === null)) {\n                  this.recheckTimeout = setTimeout(function () {\n                    _this2.updateTimeValues(false);\n                  }, RECHECK_DELAY_MS);\n                }\n\n              case 8:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function updateTimeValues() {\n        return _ref.apply(this, arguments);\n      }\n\n      return updateTimeValues;\n    }()\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          indexPatternId = _props2.indexPatternId,\n          timeFieldName = _props2.timeFieldName,\n          createIndexPattern = _props2.createIndexPattern;\n      var _state = this.state,\n          from = _state.from,\n          to = _state.to;\n\n\n      var _g = this.props.timeFieldName !== undefined ? '&_g=(time:(from:\\'' + from + '\\',mode:quick,to:\\'' + to + '\\'))' : '';\n\n      return _react3.default.createElement(\n        _eui.EuiFlexGroup,\n        { gutterSize: 'l' },\n        createIndexPattern && _react3.default.createElement(\n          _eui.EuiFlexItem,\n          null,\n          _react3.default.createElement(_eui.EuiCard, {\n            icon: _react3.default.createElement(_eui.EuiIcon, { size: 'xxl', type: 'discoverApp' }),\n            title: _react3.default.createElement(_react.FormattedMessage, {\n              id: 'xpack.ml.fileDatavisualizer.resultsLinks.viewIndexInDiscoverTitle',\n              defaultMessage: 'View index in Discover'\n            }),\n            description: '',\n            href: _chrome2.default.getBasePath() + '/app/kibana#/discover?&_a=(index:\\'' + indexPatternId + '\\')' + _g\n          })\n        ),\n        (0, _check_license.isFullLicense)() === true && timeFieldName !== undefined && this.showCreateJobLink && createIndexPattern && _react3.default.createElement(\n          _eui.EuiFlexItem,\n          null,\n          _react3.default.createElement(_eui.EuiCard, {\n            icon: _react3.default.createElement(_eui.EuiIcon, { size: 'xxl', type: 'machineLearningApp' }),\n            title: _react3.default.createElement(_react.FormattedMessage, {\n              id: 'xpack.ml.fileDatavisualizer.resultsLinks.createNewMLJobTitle',\n              defaultMessage: 'Create new ML job'\n            }),\n            description: '',\n            href: _chrome2.default.getBasePath() + '/app/ml#/jobs/new_job/step/job_type?index=' + indexPatternId + _g\n          })\n        ),\n        createIndexPattern && _react3.default.createElement(\n          _eui.EuiFlexItem,\n          null,\n          _react3.default.createElement(_eui.EuiCard, {\n            icon: _react3.default.createElement(_eui.EuiIcon, { size: 'xxl', type: 'dataVisualizer' }),\n            title: _react3.default.createElement(_react.FormattedMessage, {\n              id: 'xpack.ml.fileDatavisualizer.resultsLinks.openInDataVisualizerTitle',\n              defaultMessage: 'Open in Data Visualizer'\n            }),\n            description: '',\n            href: _chrome2.default.getBasePath() + '/app/ml#/jobs/new_job/datavisualizer?index=' + indexPatternId + _g\n          })\n        ),\n        _react3.default.createElement(\n          _eui.EuiFlexItem,\n          null,\n          _react3.default.createElement(_eui.EuiCard, {\n            icon: _react3.default.createElement(_eui.EuiIcon, { size: 'xxl', type: 'managementApp' }),\n            title: _react3.default.createElement(_react.FormattedMessage, {\n              id: 'xpack.ml.fileDatavisualizer.resultsLinks.indexManagementTitle',\n              defaultMessage: 'Index Management'\n            }),\n            description: '',\n            href: _chrome2.default.getBasePath() + '/app/kibana#/management/elasticsearch/index_management/indices'\n          })\n        ),\n        _react3.default.createElement(\n          _eui.EuiFlexItem,\n          null,\n          _react3.default.createElement(_eui.EuiCard, {\n            icon: _react3.default.createElement(_eui.EuiIcon, { size: 'xxl', type: 'managementApp' }),\n            title: _react3.default.createElement(_react.FormattedMessage, {\n              id: 'xpack.ml.fileDatavisualizer.resultsLinks.indexPatternManagementTitle',\n              defaultMessage: 'Index Pattern Management'\n            }),\n            description: '',\n            href: _chrome2.default.getBasePath() + '/app/kibana#/management/kibana/indices/' + (createIndexPattern ? indexPatternId : '')\n          })\n        )\n      );\n    }\n  }]);\n\n  return ResultsLinks;\n}(_react2.Component);",null]}