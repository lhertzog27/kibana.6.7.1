{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--9-1!/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js??ref--9-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/rollup/public/crud_app/sections/job_create/steps/step_date_histogram.js","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/rollup/public/crud_app/sections/job_create/steps/step_date_histogram.js","mtime":1567631712288},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/babel-loader/lib/index.js","mtime":1567666227676}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StepDateHistogram = exports.StepDateHistogramUi = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react3 = require('@kbn/i18n/react');\n\nvar _momentTimezone = require('moment-timezone');\n\nvar _momentTimezone2 = _interopRequireDefault(_momentTimezone);\n\nvar _eui = require('@elastic/eui');\n\nvar _parse_es_interval = require('ui/utils/parse_es_interval');\n\nvar _services = require('../../../services');\n\nvar _components = require('./components');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * or more contributor license agreements. Licensed under the Elastic License;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * you may not use this file except in compliance with the Elastic License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar timeZoneOptions = _momentTimezone2.default.tz.names().map(function (name) {\n  return {\n    value: name,\n    text: name\n  };\n});\n\nvar StepDateHistogramUi = exports.StepDateHistogramUi = function (_Component) {\n  _inherits(StepDateHistogramUi, _Component);\n\n  _createClass(StepDateHistogramUi, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props) {\n      var dateFields = props.dateFields;\n\n\n      var dateHistogramFieldOptions = dateFields.map(function (dateField) {\n        return {\n          value: dateField,\n          text: dateField\n        };\n      });\n\n      return { dateHistogramFieldOptions: dateHistogramFieldOptions };\n    }\n  }]);\n\n  function StepDateHistogramUi(props) {\n    _classCallCheck(this, StepDateHistogramUi);\n\n    var _this = _possibleConstructorReturn(this, (StepDateHistogramUi.__proto__ || Object.getPrototypeOf(StepDateHistogramUi)).call(this, props));\n\n    _this.renderErrors = function () {\n      var _this$props = _this.props,\n          areStepErrorsVisible = _this$props.areStepErrorsVisible,\n          hasErrors = _this$props.hasErrors;\n\n\n      if (!areStepErrorsVisible || !hasErrors) {\n        return null;\n      }\n\n      return _react2.default.createElement(_components.StepError, null);\n    };\n\n    _this.state = {\n      dateHistogramFieldOptions: []\n    };\n    return _this;\n  }\n\n  _createClass(StepDateHistogramUi, [{\n    key: 'renderIntervalHelpText',\n    value: function renderIntervalHelpText() {\n      var fields = this.props.fields;\n      var dateHistogramInterval = fields.dateHistogramInterval;\n\n\n      var preferFixedWarning = void 0;\n\n      try {\n        var _parseEsInterval = (0, _parse_es_interval.parseEsInterval)(dateHistogramInterval),\n            value = _parseEsInterval.value,\n            unit = _parseEsInterval.unit;\n\n        if (value === 1) {\n          switch (unit) {\n            case 'd':\n              preferFixedWarning = _react2.default.createElement(\n                _eui.EuiTextColor,\n                { color: 'warning' },\n                _react2.default.createElement(\n                  'p',\n                  null,\n                  _react2.default.createElement(_react3.FormattedMessage, {\n                    id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningDayLabel',\n                    defaultMessage: 'Consider using 24h instead of 1d. This allows for more flexible queries.'\n                  })\n                )\n              );\n              break;\n\n            case 'h':\n              preferFixedWarning = _react2.default.createElement(\n                _eui.EuiTextColor,\n                { color: 'warning' },\n                _react2.default.createElement(\n                  'p',\n                  null,\n                  _react2.default.createElement(_react3.FormattedMessage, {\n                    id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningHourLabel',\n                    defaultMessage: 'Consider using 60m instead of 1h. This allows for more flexible queries.'\n                  })\n                )\n              );\n              break;\n          }\n        }\n\n        switch (unit) {\n          case 'y':\n            preferFixedWarning = _react2.default.createElement(\n              _eui.EuiTextColor,\n              { color: 'warning' },\n              _react2.default.createElement(\n                'p',\n                null,\n                _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningYearLabel',\n                  defaultMessage: 'Consider using the d unit instead of y. This allows for more flexible queries.'\n                })\n              )\n            );\n            break;\n\n          case 'M':\n            preferFixedWarning = _react2.default.createElement(\n              _eui.EuiTextColor,\n              { color: 'warning' },\n              _react2.default.createElement(\n                'p',\n                null,\n                _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningMonthLabel',\n                  defaultMessage: 'Consider using the d unit instead of M. This allows for more flexible queries.'\n                })\n              )\n            );\n            break;\n\n          case 'w':\n            preferFixedWarning = _react2.default.createElement(\n              _eui.EuiTextColor,\n              { color: 'warning' },\n              _react2.default.createElement(\n                'p',\n                null,\n                _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningWeekLabel',\n                  defaultMessage: 'Consider using the d unit instead of w. This allows for more flexible queries.'\n                })\n              )\n            );\n            break;\n        }\n      } catch (error) {\n        // Swallow error; the validation logic will handle it elsewhere.\n      }\n\n      return _react2.default.createElement(\n        _react.Fragment,\n        null,\n        preferFixedWarning,\n        _react2.default.createElement(\n          'p',\n          null,\n          _react2.default.createElement(_react3.FormattedMessage, {\n            id: 'xpack.rollupJobs.create.stepDateHistogram.fieldInterval.helpExampleLabel',\n            defaultMessage: 'Example sizes: 1000ms, 30s, 20m, 24h, 2d, 1w, 1M, 1y'\n          })\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          fields = _props.fields,\n          onFieldsChange = _props.onFieldsChange,\n          areStepErrorsVisible = _props.areStepErrorsVisible,\n          fieldErrors = _props.fieldErrors;\n      var dateHistogramInterval = fields.dateHistogramInterval,\n          dateHistogramField = fields.dateHistogramField,\n          dateHistogramTimeZone = fields.dateHistogramTimeZone;\n      var errorDateHistogramInterval = fieldErrors.dateHistogramInterval,\n          errorDateHistogramField = fieldErrors.dateHistogramField,\n          errorDateHistogramTimeZone = fieldErrors.dateHistogramTimeZone;\n      var dateHistogramFieldOptions = this.state.dateHistogramFieldOptions;\n\n\n      return _react2.default.createElement(\n        _react.Fragment,\n        null,\n        _react2.default.createElement(\n          _eui.EuiFlexGroup,\n          { justifyContent: 'spaceBetween' },\n          _react2.default.createElement(\n            _eui.EuiFlexItem,\n            { grow: false },\n            _react2.default.createElement(\n              _eui.EuiTitle,\n              null,\n              _react2.default.createElement(\n                'h3',\n                null,\n                _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogramTitle',\n                  defaultMessage: 'Date histogram'\n                })\n              )\n            )\n          ),\n          _react2.default.createElement(\n            _eui.EuiFlexItem,\n            { grow: false },\n            _react2.default.createElement(\n              _eui.EuiButtonEmpty,\n              {\n                size: 's',\n                flush: 'right',\n                href: _services.dateHistogramDetailsUrl,\n                target: '_blank',\n                iconType: 'help'\n              },\n              _react2.default.createElement(_react3.FormattedMessage, {\n                id: 'xpack.rollupJobs.create.stepDateHistogram.readDocsButtonLabel',\n                defaultMessage: 'Date histogram docs'\n              })\n            )\n          )\n        ),\n        _react2.default.createElement(_eui.EuiSpacer, { size: 'l' }),\n        _react2.default.createElement(\n          _eui.EuiForm,\n          null,\n          _react2.default.createElement(\n            _eui.EuiDescribedFormGroup,\n            {\n              title: _react2.default.createElement('div', null),\n              description: _react2.default.createElement(\n                _react.Fragment,\n                null,\n                _react2.default.createElement(\n                  'p',\n                  null,\n                  _react2.default.createElement(_react3.FormattedMessage, {\n                    id: 'xpack.rollupJobs.create.stepDateHistogramDescription',\n                    defaultMessage: 'Define how {link} will operate on your rollup data.',\n                    values: {\n                      link: _react2.default.createElement(\n                        _eui.EuiLink,\n                        { href: _services.dateHistogramAggregationUrl, target: '_blank' },\n                        _react2.default.createElement(_react3.FormattedMessage, {\n                          id: 'xpack.rollupJobs.create.stepDateHistogramDescription.aggregationsLinkLabel',\n                          defaultMessage: 'date histogram aggregations'\n                        })\n                      )\n                    }\n                  })\n                ),\n                _react2.default.createElement(\n                  'p',\n                  null,\n                  _react2.default.createElement(_react3.FormattedMessage, {\n                    id: 'xpack.rollupJobs.create.stepDateHistogram.sectionDataSourceDescription',\n                    defaultMessage: 'Note that smaller time buckets take up proportionally more space.'\n                  })\n                )\n              ),\n              fullWidth: true\n            },\n            _react2.default.createElement(\n              _eui.EuiFormRow,\n              {\n                label: _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldDateFieldLabel',\n                  defaultMessage: 'Date field'\n                }),\n                error: errorDateHistogramField,\n                isInvalid: Boolean(areStepErrorsVisible && errorDateHistogramField),\n                fullWidth: true\n              },\n              _react2.default.createElement(_eui.EuiSelect, {\n                isInvalid: Boolean(areStepErrorsVisible && errorDateHistogramField),\n                options: dateHistogramFieldOptions,\n                value: dateHistogramField,\n                onChange: function onChange(e) {\n                  return onFieldsChange({ dateHistogramField: e.target.value });\n                },\n                fullWidth: true\n              })\n            ),\n            _react2.default.createElement(\n              _eui.EuiFormRow,\n              {\n                label: _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldIntervalLabel',\n                  defaultMessage: 'Time bucket size'\n                }),\n                error: errorDateHistogramInterval,\n                isInvalid: Boolean(areStepErrorsVisible && errorDateHistogramInterval),\n                helpText: this.renderIntervalHelpText(),\n                fullWidth: true\n              },\n              _react2.default.createElement(_eui.EuiFieldText, {\n                value: dateHistogramInterval || '',\n                onChange: function onChange(e) {\n                  return onFieldsChange({ dateHistogramInterval: e.target.value });\n                },\n                isInvalid: Boolean(areStepErrorsVisible && errorDateHistogramInterval),\n                fullWidth: true,\n                'data-test-subj': 'rollupJobInterval'\n              })\n            ),\n            _react2.default.createElement(\n              _eui.EuiFormRow,\n              {\n                label: _react2.default.createElement(_react3.FormattedMessage, {\n                  id: 'xpack.rollupJobs.create.stepDateHistogram.fieldTimeZoneLabel',\n                  defaultMessage: 'Time zone'\n                }),\n                error: errorDateHistogramTimeZone || '',\n                isInvalid: Boolean(areStepErrorsVisible && errorDateHistogramTimeZone),\n                fullWidth: true\n              },\n              _react2.default.createElement(_eui.EuiSelect, {\n                options: timeZoneOptions,\n                value: dateHistogramTimeZone,\n                onChange: function onChange(e) {\n                  return onFieldsChange({ dateHistogramTimeZone: e.target.value });\n                },\n                fullWidth: true\n              })\n            )\n          )\n        ),\n        this.renderErrors()\n      );\n    }\n  }]);\n\n  return StepDateHistogramUi;\n}(_react.Component);\n\nStepDateHistogramUi.propTypes = {\n  fields: _propTypes2.default.object.isRequired,\n  onFieldsChange: _propTypes2.default.func.isRequired,\n  fieldErrors: _propTypes2.default.object.isRequired,\n  hasErrors: _propTypes2.default.bool.isRequired,\n  areStepErrorsVisible: _propTypes2.default.bool.isRequired,\n  dateFields: _propTypes2.default.array.isRequired\n};\nvar StepDateHistogram = exports.StepDateHistogram = (0, _react3.injectI18n)(StepDateHistogramUi);",null]}