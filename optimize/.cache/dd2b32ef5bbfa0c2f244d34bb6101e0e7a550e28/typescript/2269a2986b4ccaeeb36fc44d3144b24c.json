{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/ServiceDetails/ServiceIntegrations/view.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/ServiceDetails/ServiceIntegrations/view.tsx","mtime":1567631711861},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\nimport * as tslib_1 from \"tslib\";\nimport { EuiButton, EuiContextMenu, EuiPopover } from '@elastic/eui';\nimport { i18n } from '@kbn/i18n';\nimport { memoize } from 'lodash';\nimport React from 'react';\nimport chrome from 'ui/chrome';\nimport { MachineLearningFlyout } from './MachineLearningFlyout';\nimport { WatcherFlyout } from './WatcherFlyout';\nvar ServiceIntegrationsView = /** @class */ (function (_super) {\n    tslib_1.__extends(ServiceIntegrationsView, _super);\n    function ServiceIntegrationsView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { isPopoverOpen: false, activeFlyout: null };\n        _this.getPanelItems = memoize(function (mlAvailable) {\n            var panelItems = [];\n            if (mlAvailable) {\n                panelItems = panelItems.concat(_this.getMLPanelItems());\n            }\n            return panelItems.concat(_this.getWatcherPanelItems());\n        });\n        _this.getMLPanelItems = function () {\n            return [\n                {\n                    name: i18n.translate('xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonLabel', {\n                        defaultMessage: 'Enable ML anomaly detection'\n                    }),\n                    icon: 'machineLearningApp',\n                    toolTipContent: i18n.translate('xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonTooltip', {\n                        defaultMessage: 'Set up a machine learning job for this service'\n                    }),\n                    onClick: function () {\n                        _this.closePopover();\n                        _this.openFlyout('ML');\n                    }\n                },\n                {\n                    name: i18n.translate('xpack.apm.serviceDetails.integrationsMenu.viewMLJobsButtonLabel', {\n                        defaultMessage: 'View existing ML jobs'\n                    }),\n                    icon: 'machineLearningApp',\n                    href: chrome.addBasePath('/app/ml'),\n                    target: '_blank',\n                    onClick: function () { return _this.closePopover(); }\n                }\n            ];\n        };\n        _this.getWatcherPanelItems = function () {\n            return [\n                {\n                    name: i18n.translate('xpack.apm.serviceDetails.integrationsMenu.enableWatcherErrorReportsButtonLabel', {\n                        defaultMessage: 'Enable watcher error reports'\n                    }),\n                    icon: 'watchesApp',\n                    onClick: function () {\n                        _this.closePopover();\n                        _this.openFlyout('Watcher');\n                    }\n                },\n                {\n                    name: i18n.translate('xpack.apm.serviceDetails.integrationsMenu.viewWatchesButtonLabel', {\n                        defaultMessage: 'View existing watches'\n                    }),\n                    icon: 'watchesApp',\n                    href: chrome.addBasePath('/app/kibana#/management/elasticsearch/watcher'),\n                    target: '_blank',\n                    onClick: function () { return _this.closePopover(); }\n                }\n            ];\n        };\n        _this.openPopover = function () {\n            return _this.setState({\n                isPopoverOpen: true\n            });\n        };\n        _this.closePopover = function () {\n            return _this.setState({\n                isPopoverOpen: false\n            });\n        };\n        _this.openFlyout = function (name) {\n            return _this.setState({ activeFlyout: name });\n        };\n        _this.closeFlyouts = function () { return _this.setState({ activeFlyout: null }); };\n        return _this;\n    }\n    ServiceIntegrationsView.prototype.render = function () {\n        var button = (React.createElement(EuiButton, { iconType: \"arrowDown\", iconSide: \"right\", onClick: this.openPopover }, i18n.translate('xpack.apm.serviceDetails.integrationsMenu.integrationsButtonLabel', {\n            defaultMessage: 'Integrations'\n        })));\n        return (React.createElement(React.Fragment, null,\n            React.createElement(EuiPopover, { id: \"integrations-menu\", button: button, isOpen: this.state.isPopoverOpen, closePopover: this.closePopover, panelPaddingSize: \"none\", anchorPosition: \"downRight\" },\n                React.createElement(EuiContextMenu, { initialPanelId: 0, panels: [\n                        {\n                            id: 0,\n                            items: this.getPanelItems(this.props.mlAvailable)\n                        }\n                    ] })),\n            React.createElement(MachineLearningFlyout, { location: this.props.location, isOpen: this.state.activeFlyout === 'ML', onClose: this.closeFlyouts, urlParams: this.props.urlParams, serviceTransactionTypes: this.props.serviceTransactionTypes }),\n            React.createElement(WatcherFlyout, { location: this.props.location, isOpen: this.state.activeFlyout === 'Watcher', onClose: this.closeFlyouts, urlParams: this.props.urlParams })));\n    };\n    return ServiceIntegrationsView;\n}(React.Component));\nexport { ServiceIntegrationsView };\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/ServiceDetails/ServiceIntegrations/view.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/ServiceDetails/ServiceIntegrations/view.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nimport {\n  EuiButton,\n  EuiContextMenu,\n  EuiContextMenuPanelItemDescriptor,\n  EuiPopover\n} from '@elastic/eui';\nimport { i18n } from '@kbn/i18n';\nimport { Location } from 'history';\nimport { memoize } from 'lodash';\nimport React from 'react';\nimport chrome from 'ui/chrome';\nimport { IUrlParams } from 'x-pack/plugins/apm/public/store/urlParams';\nimport { MachineLearningFlyout } from './MachineLearningFlyout';\nimport { WatcherFlyout } from './WatcherFlyout';\n\ninterface ServiceIntegrationProps {\n  mlAvailable: boolean;\n  location: Location;\n  serviceTransactionTypes: string[];\n  urlParams: IUrlParams;\n}\ninterface ServiceIntegrationState {\n  isPopoverOpen: boolean;\n  activeFlyout: FlyoutName;\n}\ntype FlyoutName = null | 'ML' | 'Watcher';\n\nexport class ServiceIntegrationsView extends React.Component<\n  ServiceIntegrationProps,\n  ServiceIntegrationState\n> {\n  public state = { isPopoverOpen: false, activeFlyout: null };\n\n  public getPanelItems = memoize((mlAvailable: boolean) => {\n    let panelItems: EuiContextMenuPanelItemDescriptor[] = [];\n    if (mlAvailable) {\n      panelItems = panelItems.concat(this.getMLPanelItems());\n    }\n    return panelItems.concat(this.getWatcherPanelItems());\n  });\n\n  public getMLPanelItems = () => {\n    return [\n      {\n        name: i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonLabel',\n          {\n            defaultMessage: 'Enable ML anomaly detection'\n          }\n        ),\n        icon: 'machineLearningApp',\n        toolTipContent: i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonTooltip',\n          {\n            defaultMessage: 'Set up a machine learning job for this service'\n          }\n        ),\n        onClick: () => {\n          this.closePopover();\n          this.openFlyout('ML');\n        }\n      },\n      {\n        name: i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.viewMLJobsButtonLabel',\n          {\n            defaultMessage: 'View existing ML jobs'\n          }\n        ),\n        icon: 'machineLearningApp',\n        href: chrome.addBasePath('/app/ml'),\n        target: '_blank',\n        onClick: () => this.closePopover()\n      }\n    ];\n  };\n\n  public getWatcherPanelItems = () => {\n    return [\n      {\n        name: i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.enableWatcherErrorReportsButtonLabel',\n          {\n            defaultMessage: 'Enable watcher error reports'\n          }\n        ),\n        icon: 'watchesApp',\n        onClick: () => {\n          this.closePopover();\n          this.openFlyout('Watcher');\n        }\n      },\n      {\n        name: i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.viewWatchesButtonLabel',\n          {\n            defaultMessage: 'View existing watches'\n          }\n        ),\n        icon: 'watchesApp',\n        href: chrome.addBasePath(\n          '/app/kibana#/management/elasticsearch/watcher'\n        ),\n        target: '_blank',\n        onClick: () => this.closePopover()\n      }\n    ];\n  };\n\n  public openPopover = () =>\n    this.setState({\n      isPopoverOpen: true\n    });\n\n  public closePopover = () =>\n    this.setState({\n      isPopoverOpen: false\n    });\n\n  public openFlyout = (name: FlyoutName) =>\n    this.setState({ activeFlyout: name });\n\n  public closeFlyouts = () => this.setState({ activeFlyout: null });\n\n  public render() {\n    const button = (\n      <EuiButton\n        iconType=\"arrowDown\"\n        iconSide=\"right\"\n        onClick={this.openPopover}\n      >\n        {i18n.translate(\n          'xpack.apm.serviceDetails.integrationsMenu.integrationsButtonLabel',\n          {\n            defaultMessage: 'Integrations'\n          }\n        )}\n      </EuiButton>\n    );\n\n    return (\n      <React.Fragment>\n        <EuiPopover\n          id=\"integrations-menu\"\n          button={button}\n          isOpen={this.state.isPopoverOpen}\n          closePopover={this.closePopover}\n          panelPaddingSize=\"none\"\n          anchorPosition=\"downRight\"\n        >\n          <EuiContextMenu\n            initialPanelId={0}\n            panels={[\n              {\n                id: 0,\n                items: this.getPanelItems(this.props.mlAvailable)\n              }\n            ]}\n          />\n        </EuiPopover>\n        <MachineLearningFlyout\n          location={this.props.location}\n          isOpen={this.state.activeFlyout === 'ML'}\n          onClose={this.closeFlyouts}\n          urlParams={this.props.urlParams}\n          serviceTransactionTypes={this.props.serviceTransactionTypes}\n        />\n        <WatcherFlyout\n          location={this.props.location}\n          isOpen={this.state.activeFlyout === 'Watcher'}\n          onClose={this.closeFlyouts}\n          urlParams={this.props.urlParams}\n        />\n      </React.Fragment>\n    );\n  }\n}\n"]}]}