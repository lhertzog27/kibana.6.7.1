{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/upgrade_assistant/public/components/tabs/checkup/deprecations/list.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/upgrade_assistant/public/components/tabs/checkup/deprecations/list.tsx","mtime":1567631712322},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\nimport React from 'react';\nimport { GroupByOption } from '../../../types';\nimport { CURRENT_MAJOR_VERSION } from 'x-pack/plugins/upgrade_assistant/common/version';\nimport { COLOR_MAP, LEVEL_MAP } from '../constants';\nimport { DeprecationCell } from './cell';\nimport { IndexDeprecationTable } from './index_table';\nvar OLD_INDEX_MESSAGE = \"Index created before \" + CURRENT_MAJOR_VERSION + \".0\";\nvar DELETE_INDEX_MESSAGE = \".tasks index must be re-created\";\nvar NEEDS_DEFAULT_FIELD_MESSAGE = 'Number of fields exceeds automatic field expansion limit';\nvar sortByLevelDesc = function (a, b) {\n    return -1 * (LEVEL_MAP[a.level] - LEVEL_MAP[b.level]);\n};\n/**\n * Used to show a single deprecation message with any detailed information.\n */\nvar MessageDeprecation = function (_a) {\n    var deprecation = _a.deprecation;\n    var items = [];\n    if (deprecation.details) {\n        items.push({ body: deprecation.details });\n    }\n    return (React.createElement(DeprecationCell, { headline: deprecation.message, healthColor: COLOR_MAP[deprecation.level], indexName: deprecation.index, reindex: deprecation.message === OLD_INDEX_MESSAGE, deleteIndex: deprecation.message === DELETE_INDEX_MESSAGE, needsDefaultFields: deprecation.message === NEEDS_DEFAULT_FIELD_MESSAGE, docUrl: deprecation.url, items: items }));\n};\n/**\n * Used to show a single (simple) deprecation message with any detailed information.\n */\nvar SimpleMessageDeprecation = function (_a) {\n    var deprecation = _a.deprecation;\n    var items = [];\n    if (deprecation.details) {\n        items.push({ body: deprecation.details });\n    }\n    return React.createElement(DeprecationCell, { items: items, docUrl: deprecation.url });\n};\n/**\n * Shows a single deprecation and table of affected indices with details for each index.\n */\nvar IndexDeprecation = function (_a) {\n    var deprecation = _a.deprecation, indices = _a.indices;\n    return (React.createElement(DeprecationCell, { docUrl: deprecation.url },\n        React.createElement(IndexDeprecationTable, { indices: indices })));\n};\n/**\n * A list of deprecations that is either shown as individual deprecation cells or as a\n * deprecation summary for a list of indices.\n */\nexport var DeprecationList = function (_a) {\n    var deprecations = _a.deprecations, currentGroupBy = _a.currentGroupBy;\n    // If we're grouping by message and the first deprecation has an index field, show an index\n    // group deprecation. Otherwise, show each message.\n    if (currentGroupBy === GroupByOption.message && deprecations[0].index !== undefined) {\n        // We assume that every deprecation message is the same issue (since they have the same\n        // message) and that each deprecation will have an index associated with it.\n        var indices = deprecations.map(function (dep) { return ({\n            index: dep.index,\n            details: dep.details,\n            reindex: dep.message === OLD_INDEX_MESSAGE,\n            delete: dep.message === DELETE_INDEX_MESSAGE,\n            needsDefaultFields: dep.message === NEEDS_DEFAULT_FIELD_MESSAGE,\n        }); });\n        return React.createElement(IndexDeprecation, { indices: indices, deprecation: deprecations[0] });\n    }\n    else if (currentGroupBy === GroupByOption.index) {\n        return (React.createElement(\"div\", null, deprecations.sort(sortByLevelDesc).map(function (dep) { return (React.createElement(MessageDeprecation, { deprecation: dep, key: dep.message })); })));\n    }\n    else {\n        return (React.createElement(\"div\", null, deprecations.sort(sortByLevelDesc).map(function (dep) { return (React.createElement(SimpleMessageDeprecation, { deprecation: dep, key: dep.message })); })));\n    }\n};\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/x-pack/plugins/upgrade_assistant/public/components/tabs/checkup/deprecations/list.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/x-pack/plugins/upgrade_assistant/public/components/tabs/checkup/deprecations/list.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nimport React, { StatelessComponent } from 'react';\n\nimport { DeprecationInfo } from 'src/legacy/core_plugins/elasticsearch';\nimport { EnrichedDeprecationInfo } from '../../../../../server/lib/es_migration_apis';\nimport { GroupByOption } from '../../../types';\n\nimport { CURRENT_MAJOR_VERSION } from 'x-pack/plugins/upgrade_assistant/common/version';\nimport { COLOR_MAP, LEVEL_MAP } from '../constants';\nimport { DeprecationCell } from './cell';\nimport { IndexDeprecationDetails, IndexDeprecationTable } from './index_table';\n\nconst OLD_INDEX_MESSAGE = `Index created before ${CURRENT_MAJOR_VERSION}.0`;\nconst DELETE_INDEX_MESSAGE = `.tasks index must be re-created`;\nconst NEEDS_DEFAULT_FIELD_MESSAGE = 'Number of fields exceeds automatic field expansion limit';\n\nconst sortByLevelDesc = (a: DeprecationInfo, b: DeprecationInfo) => {\n  return -1 * (LEVEL_MAP[a.level] - LEVEL_MAP[b.level]);\n};\n\n/**\n * Used to show a single deprecation message with any detailed information.\n */\nconst MessageDeprecation: StatelessComponent<{ deprecation: EnrichedDeprecationInfo }> = ({\n  deprecation,\n}) => {\n  const items = [];\n\n  if (deprecation.details) {\n    items.push({ body: deprecation.details });\n  }\n\n  return (\n    <DeprecationCell\n      headline={deprecation.message}\n      healthColor={COLOR_MAP[deprecation.level]}\n      indexName={deprecation.index}\n      reindex={deprecation.message === OLD_INDEX_MESSAGE}\n      deleteIndex={deprecation.message === DELETE_INDEX_MESSAGE}\n      needsDefaultFields={deprecation.message === NEEDS_DEFAULT_FIELD_MESSAGE}\n      docUrl={deprecation.url}\n      items={items}\n    />\n  );\n};\n\n/**\n * Used to show a single (simple) deprecation message with any detailed information.\n */\nconst SimpleMessageDeprecation: StatelessComponent<{ deprecation: EnrichedDeprecationInfo }> = ({\n  deprecation,\n}) => {\n  const items = [];\n\n  if (deprecation.details) {\n    items.push({ body: deprecation.details });\n  }\n\n  return <DeprecationCell items={items} docUrl={deprecation.url} />;\n};\n\ninterface IndexDeprecationProps {\n  deprecation: DeprecationInfo;\n  indices: IndexDeprecationDetails[];\n}\n\n/**\n * Shows a single deprecation and table of affected indices with details for each index.\n */\nconst IndexDeprecation: StatelessComponent<IndexDeprecationProps> = ({ deprecation, indices }) => {\n  return (\n    <DeprecationCell docUrl={deprecation.url}>\n      <IndexDeprecationTable indices={indices} />\n    </DeprecationCell>\n  );\n};\n\n/**\n * A list of deprecations that is either shown as individual deprecation cells or as a\n * deprecation summary for a list of indices.\n */\nexport const DeprecationList: StatelessComponent<{\n  deprecations: EnrichedDeprecationInfo[];\n  currentGroupBy: GroupByOption;\n}> = ({ deprecations, currentGroupBy }) => {\n  // If we're grouping by message and the first deprecation has an index field, show an index\n  // group deprecation. Otherwise, show each message.\n  if (currentGroupBy === GroupByOption.message && deprecations[0].index !== undefined) {\n    // We assume that every deprecation message is the same issue (since they have the same\n    // message) and that each deprecation will have an index associated with it.\n    const indices = deprecations.map(dep => ({\n      index: dep.index!,\n      details: dep.details,\n      reindex: dep.message === OLD_INDEX_MESSAGE,\n      delete: dep.message === DELETE_INDEX_MESSAGE,\n      needsDefaultFields: dep.message === NEEDS_DEFAULT_FIELD_MESSAGE,\n    }));\n\n    return <IndexDeprecation indices={indices} deprecation={deprecations[0]} />;\n  } else if (currentGroupBy === GroupByOption.index) {\n    return (\n      <div>\n        {deprecations.sort(sortByLevelDesc).map(dep => (\n          <MessageDeprecation deprecation={dep} key={dep.message} />\n        ))}\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        {deprecations.sort(sortByLevelDesc).map(dep => (\n          <SimpleMessageDeprecation deprecation={dep} key={dep.message} />\n        ))}\n      </div>\n    );\n  }\n};\n"]}]}