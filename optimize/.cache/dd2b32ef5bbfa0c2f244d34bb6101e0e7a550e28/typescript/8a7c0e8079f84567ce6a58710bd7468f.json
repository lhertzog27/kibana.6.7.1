{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/store/reactReduxRequest/transactionList.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/store/reactReduxRequest/transactionList.tsx","mtime":1567631711872},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\nimport * as tslib_1 from \"tslib\";\nimport React from 'react';\nimport { Request } from 'react-redux-request';\nimport { createSelector } from 'reselect';\nimport { loadTransactionList } from '../../services/rest/apm/transaction_groups';\nimport { createInitialDataSelector } from './helpers';\nvar ID = 'transactionList';\nvar INITIAL_DATA = [];\nvar withInitialData = createInitialDataSelector(INITIAL_DATA);\nvar getRelativeImpact = function (impact, impactMin, impactMax) {\n    return Math.max(((impact - impactMin) / Math.max(impactMax - impactMin, 1)) * 100, 1);\n};\nfunction getWithRelativeImpact(items) {\n    var impacts = items.map(function (_a) {\n        var impact = _a.impact;\n        return impact;\n    });\n    var impactMin = Math.min.apply(Math, tslib_1.__spread(impacts));\n    var impactMax = Math.max.apply(Math, tslib_1.__spread(impacts));\n    return items.map(function (item) {\n        return tslib_1.__assign({}, item, { impactRelative: getRelativeImpact(item.impact, impactMin, impactMax) });\n    });\n}\nexport var getTransactionList = createSelector(function (state) { return withInitialData(state.reactReduxRequest[ID]); }, function (transactionList) {\n    return tslib_1.__assign({}, transactionList, { data: getWithRelativeImpact(transactionList.data) });\n});\nexport function TransactionListRequest(_a) {\n    var urlParams = _a.urlParams, render = _a.render;\n    var serviceName = urlParams.serviceName, start = urlParams.start, end = urlParams.end, transactionType = urlParams.transactionType, kuery = urlParams.kuery;\n    if (!(serviceName && start && end)) {\n        return null;\n    }\n    return (React.createElement(Request, { id: ID, fn: loadTransactionList, args: [\n            {\n                serviceName: serviceName,\n                start: start,\n                end: end,\n                transactionType: transactionType,\n                kuery: kuery\n            }\n        ], selector: getTransactionList, render: render }));\n}\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/store/reactReduxRequest/transactionList.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/store/reactReduxRequest/transactionList.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;;AAEH,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,OAAO,EAAa,MAAM,qBAAqB,CAAC;AACzD,OAAO,EAAE,cAAc,EAAE,MAAM,UAAU,CAAC;AAE1C,OAAO,EAAE,mBAAmB,EAAE,MAAM,4CAA4C,CAAC;AAGjF,OAAO,EAAE,yBAAyB,EAAE,MAAM,WAAW,CAAC;AAEtD,IAAM,EAAE,GAAG,iBAAiB,CAAC;AAC7B,IAAM,YAAY,GAA+B,EAAE,CAAC;AACpD,IAAM,eAAe,GAAG,yBAAyB,CAC/C,YAAY,CACb,CAAC;AAEF,IAAM,iBAAiB,GAAG,UACxB,MAAc,EACd,SAAiB,EACjB,SAAiB;IAEjB,OAAA,IAAI,CAAC,GAAG,CACN,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,EACjE,CAAC,CACF;AAHD,CAGC,CAAC;AAEJ,SAAS,qBAAqB,CAAC,KAAiC;IAC9D,IAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,UAAC,EAAU;YAAR,kBAAM;QAAO,OAAA,MAAM;IAAN,CAAM,CAAC,CAAC;IAClD,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,OAAR,IAAI,mBAAQ,OAAO,EAAC,CAAC;IACvC,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,OAAR,IAAI,mBAAQ,OAAO,EAAC,CAAC;IAEvC,OAAO,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;QACnB,4BACK,IAAI,IACP,cAAc,EAAE,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,SAAS,CAAC,IACpE;IACJ,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,IAAM,kBAAkB,GAAG,cAAc,CAC9C,UAAC,KAAkB,IAAK,OAAA,eAAe,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC,EAA5C,CAA4C,EACpE,UAAA,eAAe;IACb,4BACK,eAAe,IAClB,IAAI,EAAE,qBAAqB,CAAC,eAAe,CAAC,IAAI,CAAC,IACjD;AACJ,CAAC,CACF,CAAC;AAEF,MAAM,UAAU,sBAAsB,CAAC,EAMtC;QALC,wBAAS,EACT,kBAAM;IAKE,IAAA,mCAAW,EAAE,uBAAK,EAAE,mBAAG,EAAE,2CAAe,EAAE,uBAAK,CAAe;IAEtE,IAAI,CAAC,CAAC,WAAW,IAAI,KAAK,IAAI,GAAG,CAAC,EAAE;QAClC,OAAO,IAAI,CAAC;KACb;IAED,OAAO,CACL,oBAAC,OAAO,IACN,EAAE,EAAE,EAAE,EACN,EAAE,EAAE,mBAAmB,EACvB,IAAI,EAAE;YACJ;gBACE,WAAW,aAAA;gBACX,KAAK,OAAA;gBACL,GAAG,KAAA;gBACH,eAAe,iBAAA;gBACf,KAAK,OAAA;aACN;SACF,EACD,QAAQ,EAAE,kBAAkB,EAC5B,MAAM,EAAE,MAAM,GACd,CACH,CAAC;AACJ,CAAC","sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nimport React from 'react';\nimport { Request, RRRRender } from 'react-redux-request';\nimport { createSelector } from 'reselect';\nimport { TransactionListAPIResponse } from 'x-pack/plugins/apm/server/lib/transactions/get_top_transactions';\nimport { loadTransactionList } from '../../services/rest/apm/transaction_groups';\nimport { IReduxState } from '../rootReducer';\nimport { IUrlParams } from '../urlParams';\nimport { createInitialDataSelector } from './helpers';\n\nconst ID = 'transactionList';\nconst INITIAL_DATA: TransactionListAPIResponse = [];\nconst withInitialData = createInitialDataSelector<TransactionListAPIResponse>(\n  INITIAL_DATA\n);\n\nconst getRelativeImpact = (\n  impact: number,\n  impactMin: number,\n  impactMax: number\n) =>\n  Math.max(\n    ((impact - impactMin) / Math.max(impactMax - impactMin, 1)) * 100,\n    1\n  );\n\nfunction getWithRelativeImpact(items: TransactionListAPIResponse) {\n  const impacts = items.map(({ impact }) => impact);\n  const impactMin = Math.min(...impacts);\n  const impactMax = Math.max(...impacts);\n\n  return items.map(item => {\n    return {\n      ...item,\n      impactRelative: getRelativeImpact(item.impact, impactMin, impactMax)\n    };\n  });\n}\n\nexport const getTransactionList = createSelector(\n  (state: IReduxState) => withInitialData(state.reactReduxRequest[ID]),\n  transactionList => {\n    return {\n      ...transactionList,\n      data: getWithRelativeImpact(transactionList.data)\n    };\n  }\n);\n\nexport function TransactionListRequest({\n  urlParams,\n  render\n}: {\n  urlParams: IUrlParams;\n  render: RRRRender<TransactionListAPIResponse>;\n}) {\n  const { serviceName, start, end, transactionType, kuery } = urlParams;\n\n  if (!(serviceName && start && end)) {\n    return null;\n  }\n\n  return (\n    <Request\n      id={ID}\n      fn={loadTransactionList}\n      args={[\n        {\n          serviceName,\n          start,\n          end,\n          transactionType,\n          kuery\n        }\n      ]}\n      selector={getTransactionList}\n      render={render}\n    />\n  );\n}\n"]}]}