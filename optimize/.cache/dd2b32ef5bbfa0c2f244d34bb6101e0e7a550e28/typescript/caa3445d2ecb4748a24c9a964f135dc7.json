{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/TransactionDetails/Transaction/WaterfallContainer/Waterfall/WaterfallItem.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/TransactionDetails/Transaction/WaterfallContainer/Waterfall/WaterfallItem.tsx","mtime":1567631711862},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\nimport * as tslib_1 from \"tslib\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport { EuiIcon, EuiText } from '@elastic/eui';\nimport { asTime } from 'x-pack/plugins/apm/public/utils/formatters';\nimport { colors, px, unit, units } from '../../../../../../style/variables';\nvar Container = styled('div')(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject([\"\\n  position: relative;\\n  display: block;\\n  user-select: none;\\n  padding-top: \", \";\\n  padding-bottom: \", \";\\n  margin-right: \", \";\\n  margin-left: \", \";\\n  border-top: 1px solid \", \";\\n  background-color: \", \";\\n  cursor: pointer;\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"], [\"\\n  position: relative;\\n  display: block;\\n  user-select: none;\\n  padding-top: \", \";\\n  padding-bottom: \", \";\\n  margin-right: \", \";\\n  margin-left: \", \";\\n  border-top: 1px solid \", \";\\n  background-color: \", \";\\n  cursor: pointer;\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"])), px(units.half), px(units.plus), function (props) { return px(props.timelineMargins.right); }, function (props) { return px(props.timelineMargins.left); }, colors.gray4, function (props) { return (props.isSelected ? colors.gray5 : 'initial'); }, colors.gray5);\nvar ItemBar = styled('div')(templateObject_2 || (templateObject_2 = tslib_1.__makeTemplateObject([\"\\n  box-sizing: border-box;\\n  position: relative;\\n  height: \", \";\\n  min-width: 2px;\\n  background-color: \", \";\\n\"], [\"\\n  box-sizing: border-box;\\n  position: relative;\\n  height: \", \";\\n  min-width: 2px;\\n  background-color: \", \";\\n\"])), px(unit), function (props) { return props.color; });\nvar ItemText = styled.span(templateObject_3 || (templateObject_3 = tslib_1.__makeTemplateObject([\"\\n  position: absolute;\\n  right: 0;\\n  display: flex;\\n  align-items: center;\\n  height: \", \";\\n\\n  /* add margin to all direct descendants */\\n  & > * {\\n    margin-right: \", \";\\n  }\\n\"], [\"\\n  position: absolute;\\n  right: 0;\\n  display: flex;\\n  align-items: center;\\n  height: \", \";\\n\\n  /* add margin to all direct descendants */\\n  & > * {\\n    margin-right: \", \";\\n  }\\n\"])), px(units.plus), px(units.half));\nvar SpanNameLabel = styled.span(templateObject_4 || (templateObject_4 = tslib_1.__makeTemplateObject([\"\\n  color: \", \";\\n  font-weight: normal;\\n  white-space: nowrap;\\n\"], [\"\\n  color: \", \";\\n  font-weight: normal;\\n  white-space: nowrap;\\n\"])), colors.gray2);\nvar TransactionNameLabel = styled.span(templateObject_5 || (templateObject_5 = tslib_1.__makeTemplateObject([\"\\n  font-weight: 600;\\n  white-space: nowrap;\\n\"], [\"\\n  font-weight: 600;\\n  white-space: nowrap;\\n\"])));\nfunction PrefixIcon(_a) {\n    var item = _a.item;\n    if (item.docType === 'span') {\n        // icon for database spans\n        var isDbType = item.span.span.type.startsWith('db');\n        if (isDbType) {\n            return React.createElement(EuiIcon, { type: \"database\" });\n        }\n        // omit icon for other spans\n        return null;\n    }\n    // icon for RUM agent transactions\n    var isRumAgent = item.transaction.context.service.agent.name === 'js-base';\n    if (isRumAgent) {\n        return React.createElement(EuiIcon, { type: \"globe\" });\n    }\n    // icon for other transactions\n    return React.createElement(EuiIcon, { type: \"merge\" });\n}\nfunction Duration(_a) {\n    var item = _a.item;\n    return (React.createElement(EuiText, { color: \"subdued\", size: \"xs\" }, asTime(item.duration)));\n}\nfunction HttpStatusCode(_a) {\n    var item = _a.item;\n    // http status code for transactions of type 'request'\n    var httpStatusCode = item.docType === 'transaction' &&\n        item.transaction.transaction.type === 'request'\n        ? item.transaction.transaction.result\n        : undefined;\n    if (!httpStatusCode) {\n        return null;\n    }\n    return React.createElement(EuiText, { size: \"xs\" }, httpStatusCode);\n}\nfunction NameLabel(_a) {\n    var item = _a.item;\n    var StyledLabel = item.docType === 'span' ? SpanNameLabel : TransactionNameLabel;\n    return React.createElement(StyledLabel, null, item.name);\n}\nexport function WaterfallItem(_a) {\n    var timelineMargins = _a.timelineMargins, totalDuration = _a.totalDuration, item = _a.item, color = _a.color, isSelected = _a.isSelected, onClick = _a.onClick;\n    if (!totalDuration) {\n        return null;\n    }\n    var width = (item.duration / totalDuration) * 100;\n    var left = ((item.offset + item.skew) / totalDuration) * 100;\n    return (React.createElement(Container, { type: item.docType, timelineMargins: timelineMargins, isSelected: isSelected, onClick: onClick },\n        React.createElement(ItemBar // using inline styles instead of props to avoid generating a css class for each item\n        , { style: { left: left + \"%\", width: width + \"%\" }, color: color, type: item.docType }),\n        React.createElement(ItemText // using inline styles instead of props to avoid generating a css class for each item\n        , { style: { minWidth: Math.max(100 - left, 0) + \"%\" } },\n            React.createElement(PrefixIcon, { item: item }),\n            React.createElement(HttpStatusCode, { item: item }),\n            React.createElement(NameLabel, { item: item }),\n            React.createElement(Duration, { item: item }))));\n}\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/TransactionDetails/Transaction/WaterfallContainer/Waterfall/WaterfallItem.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/x-pack/plugins/apm/public/components/app/TransactionDetails/Transaction/WaterfallContainer/Waterfall/WaterfallItem.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { EuiIcon, EuiText } from '@elastic/eui';\nimport { asTime } from 'x-pack/plugins/apm/public/utils/formatters';\nimport { colors, px, unit, units } from '../../../../../../style/variables';\nimport { IWaterfallItem } from './waterfall_helpers/waterfall_helpers';\n\ntype ItemType = 'transaction' | 'span';\n\ninterface IContainerStyleProps {\n  type: ItemType;\n  timelineMargins: ITimelineMargins;\n  isSelected: boolean;\n}\n\ninterface IBarStyleProps {\n  type: ItemType;\n  left: number;\n  width: number;\n  color: string;\n}\n\nconst Container = styled<IContainerStyleProps, 'div'>('div')`\n  position: relative;\n  display: block;\n  user-select: none;\n  padding-top: ${px(units.half)};\n  padding-bottom: ${px(units.plus)};\n  margin-right: ${props => px(props.timelineMargins.right)};\n  margin-left: ${props => px(props.timelineMargins.left)};\n  border-top: 1px solid ${colors.gray4};\n  background-color: ${props => (props.isSelected ? colors.gray5 : 'initial')};\n  cursor: pointer;\n  &:hover {\n    background-color: ${colors.gray5};\n  }\n`;\n\nconst ItemBar = styled<IBarStyleProps, any>('div')`\n  box-sizing: border-box;\n  position: relative;\n  height: ${px(unit)};\n  min-width: 2px;\n  background-color: ${props => props.color};\n`;\n\nconst ItemText = styled.span`\n  position: absolute;\n  right: 0;\n  display: flex;\n  align-items: center;\n  height: ${px(units.plus)};\n\n  /* add margin to all direct descendants */\n  & > * {\n    margin-right: ${px(units.half)};\n  }\n`;\n\nconst SpanNameLabel = styled.span`\n  color: ${colors.gray2};\n  font-weight: normal;\n  white-space: nowrap;\n`;\n\nconst TransactionNameLabel = styled.span`\n  font-weight: 600;\n  white-space: nowrap;\n`;\n\ninterface ITimelineMargins {\n  right: number;\n  left: number;\n  top: number;\n  bottom: number;\n}\n\ninterface IWaterfallItemProps {\n  timelineMargins: ITimelineMargins;\n  totalDuration?: number;\n  item: IWaterfallItem;\n  color: string;\n  isSelected: boolean;\n  onClick: () => any;\n}\n\nfunction PrefixIcon({ item }: { item: IWaterfallItem }) {\n  if (item.docType === 'span') {\n    // icon for database spans\n    const isDbType = item.span.span.type.startsWith('db');\n    if (isDbType) {\n      return <EuiIcon type=\"database\" />;\n    }\n\n    // omit icon for other spans\n    return null;\n  }\n\n  // icon for RUM agent transactions\n  const isRumAgent = item.transaction.context.service.agent.name === 'js-base';\n  if (isRumAgent) {\n    return <EuiIcon type=\"globe\" />;\n  }\n\n  // icon for other transactions\n  return <EuiIcon type=\"merge\" />;\n}\n\nfunction Duration({ item }: { item: IWaterfallItem }) {\n  return (\n    <EuiText color=\"subdued\" size=\"xs\">\n      {asTime(item.duration)}\n    </EuiText>\n  );\n}\n\nfunction HttpStatusCode({ item }: { item: IWaterfallItem }) {\n  // http status code for transactions of type 'request'\n  const httpStatusCode =\n    item.docType === 'transaction' &&\n    item.transaction.transaction.type === 'request'\n      ? item.transaction.transaction.result\n      : undefined;\n\n  if (!httpStatusCode) {\n    return null;\n  }\n\n  return <EuiText size=\"xs\">{httpStatusCode}</EuiText>;\n}\n\nfunction NameLabel({ item }: { item: IWaterfallItem }) {\n  const StyledLabel =\n    item.docType === 'span' ? SpanNameLabel : TransactionNameLabel;\n\n  return <StyledLabel>{item.name}</StyledLabel>;\n}\n\nexport function WaterfallItem({\n  timelineMargins,\n  totalDuration,\n  item,\n  color,\n  isSelected,\n  onClick\n}: IWaterfallItemProps) {\n  if (!totalDuration) {\n    return null;\n  }\n\n  const width = (item.duration / totalDuration) * 100;\n  const left = ((item.offset + item.skew) / totalDuration) * 100;\n\n  return (\n    <Container\n      type={item.docType}\n      timelineMargins={timelineMargins}\n      isSelected={isSelected}\n      onClick={onClick}\n    >\n      <ItemBar // using inline styles instead of props to avoid generating a css class for each item\n        style={{ left: `${left}%`, width: `${width}%` }}\n        color={color}\n        type={item.docType}\n      />\n      <ItemText // using inline styles instead of props to avoid generating a css class for each item\n        style={{ minWidth: `${Math.max(100 - left, 0)}%` }}\n      >\n        <PrefixIcon item={item} />\n        <HttpStatusCode item={item} />\n        <NameLabel item={item} />\n        <Duration item={item} />\n      </ItemText>\n    </Container>\n  );\n}\n"]}]}