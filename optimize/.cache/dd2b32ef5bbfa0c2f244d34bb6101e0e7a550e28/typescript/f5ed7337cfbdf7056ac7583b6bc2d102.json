{"remainingRequest":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js??ref--10-1!/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js??ref--10-2!/home/anthony/git_workspaces/kibana/x-pack/plugins/beats_management/public/components/tag/config_view/index.tsx","dependencies":[{"path":"/home/anthony/git_workspaces/kibana/x-pack/plugins/beats_management/public/components/tag/config_view/index.tsx","mtime":1567631711881},{"path":"/home/anthony/git_workspaces/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1567666236302},{"path":"/home/anthony/git_workspaces/kibana/node_modules/thread-loader/dist/cjs.js","mtime":1567666239443},{"path":"/home/anthony/git_workspaces/kibana/node_modules/ts-loader/index.js","mtime":1567666229769}],"contextDependencies":[],"result":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\nimport * as tslib_1 from \"tslib\";\nimport { EuiButton, EuiButtonEmpty, EuiFieldText, EuiFlexGroup, EuiFlexItem, EuiFlyout, EuiFlyoutBody, EuiFlyoutFooter, EuiFlyoutHeader, EuiFormRow, EuiHorizontalRule, EuiSelect, EuiTitle, } from '@elastic/eui';\nimport { i18n } from '@kbn/i18n';\nimport React from 'react';\nimport { configBlockSchemas } from '../../../../common/config_schemas';\nimport { translateConfigSchema } from '../../../../common/config_schemas_translations_map';\nimport { ConfigForm } from './config_form';\nvar ConfigViewUi = /** @class */ (function (_super) {\n    tslib_1.__extends(ConfigViewUi, _super);\n    function ConfigViewUi(props) {\n        var _this = _super.call(this, props) || this;\n        _this.form = React.createRef();\n        _this.schema = translateConfigSchema(configBlockSchemas);\n        _this.onValueChange = function (field) { return function (e) {\n            var value = e.currentTarget ? e.currentTarget.value : e;\n            _this.setState(function (state) {\n                var _a;\n                return ({\n                    configBlock: tslib_1.__assign({}, state.configBlock, (_a = {}, _a[field] = value, _a)),\n                });\n            });\n        }; };\n        _this.editMode = props.configBlock !== undefined;\n        _this.state = {\n            valid: false,\n            configBlock: props.configBlock || {\n                type: _this.schema[0].id,\n            },\n        };\n        return _this;\n    }\n    ConfigViewUi.prototype.render = function () {\n        var _this = this;\n        var thisConfigSchema = this.schema.find(function (s) { return _this.state.configBlock.type === s.id; });\n        if (!thisConfigSchema) {\n            return i18n.translate('xpack.beatsManagement.tagConfig.invalidSchema', {\n                defaultMessage: 'Error: This config is invalid, it is not supported by Beats and should be removed',\n            });\n        }\n        return (React.createElement(EuiFlyout, { onClose: this.props.onClose },\n            React.createElement(EuiFlyoutHeader, null,\n                React.createElement(EuiTitle, { size: \"m\" },\n                    React.createElement(\"h2\", null, this.editMode\n                        ? this.props.onSave\n                            ? i18n.translate('xpack.beatsManagement.tagConfig.editConfigurationTitle', {\n                                defaultMessage: 'Edit configuration block',\n                            })\n                            : i18n.translate('xpack.beatsManagement.tagConfig.viewConfigurationTitle\"', {\n                                defaultMessage: 'View configuration block',\n                            })\n                        : i18n.translate('xpack.beatsManagement.tagConfig.addConfigurationTitle\"', {\n                            defaultMessage: 'Add configuration block',\n                        })))),\n            React.createElement(EuiFlyoutBody, null,\n                React.createElement(EuiFormRow, { label: i18n.translate('xpack.beatsManagement.tagConfig.typeLabel', {\n                        defaultMessage: 'Type',\n                    }) },\n                    React.createElement(EuiSelect, { options: this.schema.map(function (s) { return ({ value: s.id, text: s.name }); }), value: this.state.configBlock.type, disabled: this.editMode, onChange: this.onValueChange('type') })),\n                React.createElement(EuiFormRow, { label: i18n.translate('xpack.beatsManagement.tagConfig.descriptionLabel', {\n                        defaultMessage: 'Description',\n                    }) },\n                    React.createElement(EuiFieldText, { value: this.state.configBlock.description, disabled: !this.props.onSave, onChange: this.onValueChange('description'), placeholder: i18n.translate('xpack.beatsManagement.tagConfig.descriptionPlaceholder', {\n                            defaultMessage: 'Description (optional)',\n                        }) })),\n                React.createElement(\"h3\", null, i18n.translate('xpack.beatsManagement.tagConfig.configurationTypeText', {\n                    defaultMessage: '{configType} configuration',\n                    values: {\n                        configType: thisConfigSchema ? thisConfigSchema.name : 'Unknown',\n                    },\n                })),\n                React.createElement(EuiHorizontalRule, null),\n                React.createElement(ConfigForm, { onSubmit: this.props.onSave\n                        ? function (data) {\n                            if (_this.props.onSave) {\n                                _this.props.onSave(tslib_1.__assign({}, _this.state.configBlock, { config: data }));\n                            }\n                            _this.props.onClose();\n                        }\n                        : undefined, canSubmit: function (canIt) { return _this.setState({ valid: canIt }); }, ref: this.form, values: this.state.configBlock, id: thisConfigSchema ? thisConfigSchema.name : 'Undefined', schema: thisConfigSchema })),\n            React.createElement(EuiFlyoutFooter, null,\n                React.createElement(EuiFlexGroup, { justifyContent: \"spaceBetween\" },\n                    React.createElement(EuiFlexItem, { grow: false },\n                        React.createElement(EuiButtonEmpty, { iconType: \"cross\", onClick: this.props.onClose }, i18n.translate('xpack.beatsManagement.tagConfig.closeButtonLabel', {\n                            defaultMessage: 'Close',\n                        }))),\n                    this.props.onSave && (React.createElement(EuiFlexItem, { grow: false },\n                        React.createElement(EuiButton, { disabled: !this.state.valid, fill: true, onClick: function () {\n                                if (_this.form.current) {\n                                    _this.form.current.submit();\n                                }\n                            } }, i18n.translate('xpack.beatsManagement.tagConfig.saveButtonLabel', {\n                            defaultMessage: 'Save',\n                        }))))))));\n    };\n    return ConfigViewUi;\n}(React.Component));\nexport var ConfigView = ConfigViewUi;\n",{"version":3,"file":"/home/anthony/git_workspaces/kibana/x-pack/plugins/beats_management/public/components/tag/config_view/index.tsx","sourceRoot":"","sources":["/home/anthony/git_workspaces/kibana/x-pack/plugins/beats_management/public/components/tag/config_view/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n\nimport {\n  EuiButton,\n  EuiButtonEmpty,\n  EuiFieldText,\n  EuiFlexGroup,\n  EuiFlexItem,\n  EuiFlyout,\n  EuiFlyoutBody,\n  EuiFlyoutFooter,\n  EuiFlyoutHeader,\n  EuiFormRow,\n  EuiHorizontalRule,\n  EuiSelect,\n  EuiTitle,\n} from '@elastic/eui';\nimport { i18n } from '@kbn/i18n';\nimport React from 'react';\nimport { configBlockSchemas } from '../../../../common/config_schemas';\nimport { translateConfigSchema } from '../../../../common/config_schemas_translations_map';\nimport { ConfigurationBlock } from '../../../../common/domain_types';\nimport { ConfigForm } from './config_form';\n\ninterface ComponentProps {\n  configBlock?: ConfigurationBlock;\n  onClose(): any;\n  onSave?(config: ConfigurationBlock): any;\n}\n\ninterface ComponentState {\n  valid: boolean;\n  configBlock: ConfigurationBlock;\n}\n\nclass ConfigViewUi extends React.Component<ComponentProps, ComponentState> {\n  private form = React.createRef<any>();\n  private editMode: boolean;\n  private schema = translateConfigSchema(configBlockSchemas);\n  constructor(props: any) {\n    super(props);\n    this.editMode = props.configBlock !== undefined;\n\n    this.state = {\n      valid: false,\n      configBlock: props.configBlock || {\n        type: this.schema[0].id,\n      },\n    };\n  }\n  public onValueChange = (field: string) => (e: any) => {\n    const value = e.currentTarget ? e.currentTarget.value : e;\n    this.setState((state: any) => ({\n      configBlock: {\n        ...state.configBlock,\n        [field]: value,\n      },\n    }));\n  };\n  public render() {\n    const thisConfigSchema = this.schema.find(s => this.state.configBlock.type === s.id);\n\n    if (!thisConfigSchema) {\n      return i18n.translate('xpack.beatsManagement.tagConfig.invalidSchema', {\n        defaultMessage:\n          'Error: This config is invalid, it is not supported by Beats and should be removed',\n      });\n    }\n    return (\n      <EuiFlyout onClose={this.props.onClose}>\n        <EuiFlyoutHeader>\n          <EuiTitle size=\"m\">\n            <h2>\n              {this.editMode\n                ? this.props.onSave\n                  ? i18n.translate('xpack.beatsManagement.tagConfig.editConfigurationTitle', {\n                      defaultMessage: 'Edit configuration block',\n                    })\n                  : i18n.translate('xpack.beatsManagement.tagConfig.viewConfigurationTitle\"', {\n                      defaultMessage: 'View configuration block',\n                    })\n                : i18n.translate('xpack.beatsManagement.tagConfig.addConfigurationTitle\"', {\n                    defaultMessage: 'Add configuration block',\n                  })}\n            </h2>\n          </EuiTitle>\n        </EuiFlyoutHeader>\n        <EuiFlyoutBody>\n          <EuiFormRow\n            label={i18n.translate('xpack.beatsManagement.tagConfig.typeLabel', {\n              defaultMessage: 'Type',\n            })}\n          >\n            <EuiSelect\n              options={this.schema.map(s => ({ value: s.id, text: s.name }))}\n              value={this.state.configBlock.type}\n              disabled={this.editMode}\n              onChange={this.onValueChange('type')}\n            />\n          </EuiFormRow>\n          <EuiFormRow\n            label={i18n.translate('xpack.beatsManagement.tagConfig.descriptionLabel', {\n              defaultMessage: 'Description',\n            })}\n          >\n            <EuiFieldText\n              value={this.state.configBlock.description}\n              disabled={!this.props.onSave}\n              onChange={this.onValueChange('description')}\n              placeholder={i18n.translate(\n                'xpack.beatsManagement.tagConfig.descriptionPlaceholder',\n                {\n                  defaultMessage: 'Description (optional)',\n                }\n              )}\n            />\n          </EuiFormRow>\n          <h3>\n            {i18n.translate('xpack.beatsManagement.tagConfig.configurationTypeText', {\n              defaultMessage: '{configType} configuration',\n              values: {\n                configType: thisConfigSchema ? thisConfigSchema.name : 'Unknown',\n              },\n            })}\n          </h3>\n          <EuiHorizontalRule />\n\n          <ConfigForm\n            onSubmit={\n              this.props.onSave\n                ? data => {\n                    if (this.props.onSave) {\n                      this.props.onSave({\n                        ...this.state.configBlock,\n                        config: data,\n                      });\n                    }\n                    this.props.onClose();\n                  }\n                : undefined\n            }\n            canSubmit={canIt => this.setState({ valid: canIt })}\n            ref={this.form}\n            values={this.state.configBlock}\n            id={thisConfigSchema ? thisConfigSchema.name : 'Undefined'}\n            schema={thisConfigSchema}\n          />\n        </EuiFlyoutBody>\n        <EuiFlyoutFooter>\n          <EuiFlexGroup justifyContent=\"spaceBetween\">\n            <EuiFlexItem grow={false}>\n              <EuiButtonEmpty iconType=\"cross\" onClick={this.props.onClose}>\n                {i18n.translate('xpack.beatsManagement.tagConfig.closeButtonLabel', {\n                  defaultMessage: 'Close',\n                })}\n              </EuiButtonEmpty>\n            </EuiFlexItem>\n            {this.props.onSave && (\n              <EuiFlexItem grow={false}>\n                <EuiButton\n                  disabled={!this.state.valid}\n                  fill\n                  onClick={() => {\n                    if (this.form.current) {\n                      this.form.current.submit();\n                    }\n                  }}\n                >\n                  {i18n.translate('xpack.beatsManagement.tagConfig.saveButtonLabel', {\n                    defaultMessage: 'Save',\n                  })}\n                </EuiButton>\n              </EuiFlexItem>\n            )}\n          </EuiFlexGroup>\n        </EuiFlyoutFooter>\n      </EuiFlyout>\n    );\n  }\n}\n\nexport const ConfigView = ConfigViewUi;\n"]}]}