"use strict";
/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License;
 * you may not use this file except in compliance with the Elastic License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const get_bucket_size_1 = require("../../../helpers/get_bucket_size");
const fetcher_1 = require("./fetcher");
const transform_1 = require("./transform");
async function getApmTimeseriesData(options) {
    const { start, end } = options.setup;
    const { bucketSize } = get_bucket_size_1.getBucketSize(start, end, 'auto');
    const timeseriesResponse = await fetcher_1.timeseriesFetcher(options);
    return transform_1.timeseriesTransformer({
        timeseriesResponse,
        bucketSize
    });
}
exports.getApmTimeseriesData = getApmTimeseriesData;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYW50aG9ueS9naXRfd29ya3NwYWNlcy9raWJhbmEveC1wYWNrL3BsdWdpbnMvYXBtL3NlcnZlci9saWIvdHJhbnNhY3Rpb25zL2NoYXJ0cy9nZXRfdGltZXNlcmllc19kYXRhL2luZGV4LnRzIiwic291cmNlcyI6WyIvaG9tZS9hbnRob255L2dpdF93b3Jrc3BhY2VzL2tpYmFuYS94LXBhY2svcGx1Z2lucy9hcG0vc2VydmVyL2xpYi90cmFuc2FjdGlvbnMvY2hhcnRzL2dldF90aW1lc2VyaWVzX2RhdGEvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsc0VBQWlFO0FBRWpFLHVDQUE4QztBQUM5QywyQ0FBb0Q7QUFFN0MsS0FBSyxVQUFVLG9CQUFvQixDQUFDLE9BSzFDO0lBQ0MsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO0lBQ3JDLE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRywrQkFBYSxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFekQsTUFBTSxrQkFBa0IsR0FBRyxNQUFNLDJCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzVELE9BQU8saUNBQXFCLENBQUM7UUFDM0Isa0JBQWtCO1FBQ2xCLFVBQVU7S0FDWCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBZEQsb0RBY0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IEVsYXN0aWNzZWFyY2ggQi5WLiBhbmQvb3IgbGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuIExpY2Vuc2VkIHVuZGVyIHRoZSBFbGFzdGljIExpY2Vuc2U7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIEVsYXN0aWMgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBnZXRCdWNrZXRTaXplIH0gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9nZXRfYnVja2V0X3NpemUnO1xuaW1wb3J0IHsgU2V0dXAgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL3NldHVwX3JlcXVlc3QnO1xuaW1wb3J0IHsgdGltZXNlcmllc0ZldGNoZXIgfSBmcm9tICcuL2ZldGNoZXInO1xuaW1wb3J0IHsgdGltZXNlcmllc1RyYW5zZm9ybWVyIH0gZnJvbSAnLi90cmFuc2Zvcm0nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBtVGltZXNlcmllc0RhdGEob3B0aW9uczoge1xuICBzZXJ2aWNlTmFtZTogc3RyaW5nO1xuICB0cmFuc2FjdGlvblR5cGU/OiBzdHJpbmc7XG4gIHRyYW5zYWN0aW9uTmFtZT86IHN0cmluZztcbiAgc2V0dXA6IFNldHVwO1xufSkge1xuICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IG9wdGlvbnMuc2V0dXA7XG4gIGNvbnN0IHsgYnVja2V0U2l6ZSB9ID0gZ2V0QnVja2V0U2l6ZShzdGFydCwgZW5kLCAnYXV0bycpO1xuXG4gIGNvbnN0IHRpbWVzZXJpZXNSZXNwb25zZSA9IGF3YWl0IHRpbWVzZXJpZXNGZXRjaGVyKG9wdGlvbnMpO1xuICByZXR1cm4gdGltZXNlcmllc1RyYW5zZm9ybWVyKHtcbiAgICB0aW1lc2VyaWVzUmVzcG9uc2UsXG4gICAgYnVja2V0U2l6ZVxuICB9KTtcbn1cbiJdfQ==