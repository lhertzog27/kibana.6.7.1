"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License;
 * you may not use this file except in compliance with the Elastic License.
 */
// @ts-ignore
const crypto_1 = require("../../../server/lib/crypto");
exports.decryptJobHeaders = async ({ job, server, }) => {
    const crypto = crypto_1.cryptoFactory(server);
    const decryptedHeaders = await crypto.decrypt(job.headers);
    return { job, decryptedHeaders, server };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYW50aG9ueS9naXRfd29ya3NwYWNlcy9raWJhbmEveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL2V4cG9ydF90eXBlcy9jb21tb24vZXhlY3V0ZV9qb2IvZGVjcnlwdF9qb2JfaGVhZGVycy50cyIsInNvdXJjZXMiOlsiL2hvbWUvYW50aG9ueS9naXRfd29ya3NwYWNlcy9raWJhbmEveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL2V4cG9ydF90eXBlcy9jb21tb24vZXhlY3V0ZV9qb2IvZGVjcnlwdF9qb2JfaGVhZGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0dBSUc7QUFDSCxhQUFhO0FBQ2IsdURBQTJEO0FBRzlDLFFBQUEsaUJBQWlCLEdBQUcsS0FBSyxFQUFFLEVBQ3RDLEdBQUcsRUFDSCxNQUFNLEdBSVAsRUFBRSxFQUFFO0lBQ0gsTUFBTSxNQUFNLEdBQWtCLHNCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEQsTUFBTSxnQkFBZ0IsR0FBVyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ25FLE9BQU8sRUFBRSxHQUFHLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLENBQUM7QUFDM0MsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCBFbGFzdGljc2VhcmNoIEIuVi4gYW5kL29yIGxpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBMaWNlbnNlZCB1bmRlciB0aGUgRWxhc3RpYyBMaWNlbnNlO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBFbGFzdGljIExpY2Vuc2UuXG4gKi9cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IGNyeXB0b0ZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi9zZXJ2ZXIvbGliL2NyeXB0byc7XG5pbXBvcnQgeyBDcnlwdG9GYWN0b3J5LCBLYm5TZXJ2ZXIsIFJlcG9ydGluZ0pvYiB9IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGRlY3J5cHRKb2JIZWFkZXJzID0gYXN5bmMgKHtcbiAgam9iLFxuICBzZXJ2ZXIsXG59OiB7XG4gIGpvYjogUmVwb3J0aW5nSm9iO1xuICBzZXJ2ZXI6IEtiblNlcnZlcjtcbn0pID0+IHtcbiAgY29uc3QgY3J5cHRvOiBDcnlwdG9GYWN0b3J5ID0gY3J5cHRvRmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCBkZWNyeXB0ZWRIZWFkZXJzOiBzdHJpbmcgPSBhd2FpdCBjcnlwdG8uZGVjcnlwdChqb2IuaGVhZGVycyk7XG4gIHJldHVybiB7IGpvYiwgZGVjcnlwdGVkSGVhZGVycywgc2VydmVyIH07XG59O1xuIl19