"use strict";
/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License;
 * you may not use this file except in compliance with the Elastic License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const calculate_bucket_size_1 = require("./calculate_bucket_size");
const get_buckets_1 = require("./get_buckets");
async function getDistribution(serviceName, transactionName, transactionType, transactionId, traceId, setup) {
    const bucketSize = await calculate_bucket_size_1.calculateBucketSize(serviceName, transactionName, transactionType, setup);
    const { defaultSample, buckets, totalHits } = await get_buckets_1.getBuckets(serviceName, transactionName, transactionType, transactionId, traceId, bucketSize, setup);
    return {
        totalHits,
        buckets,
        bucketSize,
        defaultSample
    };
}
exports.getDistribution = getDistribution;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYW50aG9ueS9naXRfd29ya3NwYWNlcy9raWJhbmEveC1wYWNrL3BsdWdpbnMvYXBtL3NlcnZlci9saWIvdHJhbnNhY3Rpb25zL2Rpc3RyaWJ1dGlvbi9pbmRleC50cyIsInNvdXJjZXMiOlsiL2hvbWUvYW50aG9ueS9naXRfd29ya3NwYWNlcy9raWJhbmEveC1wYWNrL3BsdWdpbnMvYXBtL3NlcnZlci9saWIvdHJhbnNhY3Rpb25zL2Rpc3RyaWJ1dGlvbi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7QUFHSCxtRUFBOEQ7QUFDOUQsK0NBQTJDO0FBVXBDLEtBQUssVUFBVSxlQUFlLENBQ25DLFdBQW1CLEVBQ25CLGVBQXVCLEVBQ3ZCLGVBQXVCLEVBQ3ZCLGFBQXFCLEVBQ3JCLE9BQWUsRUFDZixLQUFZO0lBRVosTUFBTSxVQUFVLEdBQUcsTUFBTSwyQ0FBbUIsQ0FDMUMsV0FBVyxFQUNYLGVBQWUsRUFDZixlQUFlLEVBQ2YsS0FBSyxDQUNOLENBQUM7SUFFRixNQUFNLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsR0FBRyxNQUFNLHdCQUFVLENBQzVELFdBQVcsRUFDWCxlQUFlLEVBQ2YsZUFBZSxFQUNmLGFBQWEsRUFDYixPQUFPLEVBQ1AsVUFBVSxFQUNWLEtBQUssQ0FDTixDQUFDO0lBRUYsT0FBTztRQUNMLFNBQVM7UUFDVCxPQUFPO1FBQ1AsVUFBVTtRQUNWLGFBQWE7S0FDZCxDQUFDO0FBQ0osQ0FBQztBQS9CRCwwQ0ErQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IEVsYXN0aWNzZWFyY2ggQi5WLiBhbmQvb3IgbGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuIExpY2Vuc2VkIHVuZGVyIHRoZSBFbGFzdGljIExpY2Vuc2U7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIEVsYXN0aWMgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTZXR1cCB9IGZyb20gJy4uLy4uL2hlbHBlcnMvc2V0dXBfcmVxdWVzdCc7XG5pbXBvcnQgeyBjYWxjdWxhdGVCdWNrZXRTaXplIH0gZnJvbSAnLi9jYWxjdWxhdGVfYnVja2V0X3NpemUnO1xuaW1wb3J0IHsgZ2V0QnVja2V0cyB9IGZyb20gJy4vZ2V0X2J1Y2tldHMnO1xuaW1wb3J0IHsgSUJ1Y2tldCB9IGZyb20gJy4vZ2V0X2J1Y2tldHMvdHJhbnNmb3JtJztcblxuZXhwb3J0IGludGVyZmFjZSBJVHJhbnNhY3Rpb25EaXN0cmlidXRpb25BUElSZXNwb25zZSB7XG4gIHRvdGFsSGl0czogbnVtYmVyO1xuICBidWNrZXRzOiBJQnVja2V0W107XG4gIGJ1Y2tldFNpemU6IG51bWJlcjtcbiAgZGVmYXVsdFNhbXBsZT86IElCdWNrZXRbJ3NhbXBsZSddO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGlzdHJpYnV0aW9uKFxuICBzZXJ2aWNlTmFtZTogc3RyaW5nLFxuICB0cmFuc2FjdGlvbk5hbWU6IHN0cmluZyxcbiAgdHJhbnNhY3Rpb25UeXBlOiBzdHJpbmcsXG4gIHRyYW5zYWN0aW9uSWQ6IHN0cmluZyxcbiAgdHJhY2VJZDogc3RyaW5nLFxuICBzZXR1cDogU2V0dXBcbik6IFByb21pc2U8SVRyYW5zYWN0aW9uRGlzdHJpYnV0aW9uQVBJUmVzcG9uc2U+IHtcbiAgY29uc3QgYnVja2V0U2l6ZSA9IGF3YWl0IGNhbGN1bGF0ZUJ1Y2tldFNpemUoXG4gICAgc2VydmljZU5hbWUsXG4gICAgdHJhbnNhY3Rpb25OYW1lLFxuICAgIHRyYW5zYWN0aW9uVHlwZSxcbiAgICBzZXR1cFxuICApO1xuXG4gIGNvbnN0IHsgZGVmYXVsdFNhbXBsZSwgYnVja2V0cywgdG90YWxIaXRzIH0gPSBhd2FpdCBnZXRCdWNrZXRzKFxuICAgIHNlcnZpY2VOYW1lLFxuICAgIHRyYW5zYWN0aW9uTmFtZSxcbiAgICB0cmFuc2FjdGlvblR5cGUsXG4gICAgdHJhbnNhY3Rpb25JZCxcbiAgICB0cmFjZUlkLFxuICAgIGJ1Y2tldFNpemUsXG4gICAgc2V0dXBcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsSGl0cyxcbiAgICBidWNrZXRzLFxuICAgIGJ1Y2tldFNpemUsXG4gICAgZGVmYXVsdFNhbXBsZVxuICB9O1xufVxuIl19